import{u as b,s as P,x as y,r as x,c as m,b as f,d as o,f as w,t as i,y as $,p as F,z as M,e as p,w as B,g as S,h as V,m as C}from"../index.js";import{u as L}from"./authStore-DVIAn0uN.js";import{u as R}from"./useAlert-BgI_2DEv.js";import{L as q}from"./LanguageSelector-Cde5xz4W.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-DjCFsGER.js";const N={class:"forgot-password-view"},I={class:"forgot-password-container"},T={class:"forgot-password-card"},A={class:"welcome-section"},D={class:"welcome-title"},H={class:"welcome-subtitle"},j={class:"input-group"},z=["placeholder"],U=["disabled"],Z={key:0},G={key:1,class:"loading-spinner"},J={class:"back-to-login"},K={__name:"ForgotPasswordView",setup(O){const h=C(),v=L(),g=b(),{t:r}=P(),{showError:n}=R(),a=y({email:""}),l=x(!1),_=()=>a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)?!0:(n(r("forgotPassword.validation.validEmail")),!1):(n(r("forgotPassword.validation.emailRequired")),!1),k=async()=>{var e,s,d,c;l.value=!0;try{if(!_())return;const t=await v.forgotPassword(a.email.trim());if(t.success)h.push({path:`/${g.locale}/reset-code`,query:{email:a.email.trim()}});else{let u=r("forgotPassword.errors.sendFailed");(e=t.error)!=null&&e.includes("not found")||(s=t.error)!=null&&s.includes("does not exist")?u=r("forgotPassword.errors.emailNotFound"):(d=t.error)!=null&&d.includes("too many")||(c=t.error)!=null&&c.includes("429")?u=r("forgotPassword.errors.tooManyRequests"):u+=t.error,n(u)}}catch(t){console.error("Forgot password error:",t),n(r("forgotPassword.errors.sendFailed")+(t.message||"Error desconocido"))}finally{l.value=!1}};return(e,s)=>{const d=V("router-link");return f(),m("div",N,[s[3]||(s[3]=o("div",{class:"background-container"},[o("div",{class:"background-overlay"})],-1)),w(q,{position:"absolute",theme:"light"}),o("div",I,[o("div",T,[o("div",A,[o("h2",D,i(e.$t("forgotPassword.title")),1),o("p",H,i(e.$t("forgotPassword.subtitle")),1)]),o("form",{onSubmit:$(k,["prevent"]),class:"forgot-password-form"},[o("div",j,[F(o("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>a.email=c),type:"email",placeholder:e.$t("forgotPassword.emailPlaceholder"),class:"form-input",required:""},null,8,z),[[M,a.email]])]),o("button",{type:"submit",class:"submit-btn",disabled:l.value},[l.value?(f(),m("span",G,[s[1]||(s[1]=o("svg",{class:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4","stroke-opacity":"0.25"}),o("path",{d:"M4 12C4 16.4183 7.58172 20 12 20V12H4Z",fill:"currentColor"})],-1)),p(" "+i(e.$t("forgotPassword.sendingButton")),1)])):(f(),m("span",Z,i(e.$t("forgotPassword.sendButton")),1))],8,U)],32),o("div",J,[w(d,{to:`/${S(g).locale}/login`,class:"back-link"},{default:B(()=>[s[2]||(s[2]=o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M19 12H5M5 12L12 19M5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),p(" "+i(e.$t("forgotPassword.backToLogin")),1)]),_:1},8,["to"])])])])])}}},eo=E(K,[["__scopeId","data-v-5b4dd237"]]);export{eo as default};
