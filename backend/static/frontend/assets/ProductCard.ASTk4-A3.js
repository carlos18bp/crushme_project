import{r as b,E as M,c as r,j as _,b as a,d as o,g as h,F as W,i as E,t as n,y as x,m as z,s as V,u as q,N as R,l as S,f as G,M as Z}from"./index.OMjhQo4e.js";import{u as Y}from"./cartStore.5gDApDey.js";import{u as J}from"./authStore.BS2vjGsx.js";import{u as K}from"./profileStore.BhMJoLTZ.js";import{u as Q}from"./wishlistStore.BRry0sWr.js";import{_ as I}from"./_plugin-vue_export-helper.DlAUqK2U.js";const X={class:"bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl"},tt={key:0,class:"flex justify-center py-8"},et={key:1,class:"space-y-2 max-h-96 overflow-y-auto"},ot=["onClick","disabled"],st={class:"flex items-center justify-between"},rt={class:"flex-1"},at={class:"font-semibold text-gray-900"},dt={class:"text-xs text-gray-500"},it={key:0,class:"animate-spin h-5 w-5 text-brand-pink-medium",fill:"none",viewBox:"0 0 24 24"},lt={key:2,class:"text-center py-8"},nt={key:3,class:"mt-4 p-4 bg-green-50 border-2 border-green-200 rounded-xl animate-fade-in"},ct={class:"flex items-start gap-3"},ut={class:"flex-1"},pt={class:"text-sm font-medium text-green-800"},ht={key:4,class:"mt-4 p-4 bg-pink-50 border-2 border-pink-200 rounded-xl animate-fade-in"},mt={class:"flex items-start gap-3"},vt={class:"flex-1"},gt={class:"text-sm font-medium text-pink-800"},ft={class:"flex gap-3 mt-6"},kt=["disabled"],yt={__name:"WishlistSelector",props:{show:{type:Boolean,default:!1},productId:{type:Number,required:!0}},emits:["close","added","create-wishlist"],setup(l,{emit:F}){const t=l,g=F,m=Q(),f=b(!1),c=b(null),v=b(null),k=b(null);M(()=>t.show,async(u,s)=>{u&&!s&&(v.value=null,k.value=null,c.value=null,f.value=!1,await m.fetchWishlists()),!u&&s&&(v.value=null,k.value=null,c.value=null,f.value=!1)});const C=async u=>{if(!f.value){f.value=!0,c.value=u,v.value=null,k.value=null;try{const s=await m.addWooCommerceProductToWishlist(u,t.productId,"","medium");s.success?(k.value="Product added to wishlist!",g("added",u),setTimeout(()=>{g("close")},800)):v.value=s.error||"Failed to add product to wishlist"}catch(s){v.value="An error occurred while adding the product",console.error("Error adding to wishlist:",s)}finally{f.value=!1,c.value=null}}};return(u,s)=>l.show?(a(),r("div",{key:0,class:"fixed inset-0 bg-white/40 backdrop-blur-md flex items-center justify-center z-50",onClick:s[2]||(s[2]=x(p=>u.$emit("close"),["self"]))},[o("div",X,[s[8]||(s[8]=o("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Add to Wishlist",-1)),h(m).isLoading?(a(),r("div",tt,[...s[3]||(s[3]=[o("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-brand-pink-medium"},null,-1)])])):h(m).wishlists.length>0?(a(),r("div",et,[(a(!0),r(W,null,E(h(m).wishlists,p=>(a(),r("button",{key:p.id,onClick:$=>C(p.id),disabled:f.value,class:"w-full text-left p-3 border-2 border-gray-200 rounded-lg hover:border-brand-pink-medium hover:bg-brand-pink-medium/5 transition-all disabled:opacity-50"},[o("div",st,[o("div",rt,[o("p",at,n(p.name),1),o("p",dt,n(p.total_items)+" items",1)]),f.value&&c.value===p.id?(a(),r("svg",it,[...s[4]||(s[4]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):_("",!0)])],8,ot))),128))])):(a(),r("div",lt,[s[5]||(s[5]=o("p",{class:"text-gray-500 mb-4"},"You don't have any wishlists yet",-1)),o("button",{onClick:s[0]||(s[0]=p=>u.$emit("create-wishlist")),class:"px-4 py-2 border-2 border-brand-pink-medium text-brand-pink-medium bg-white rounded-lg hover:bg-brand-pink-medium hover:text-white transition-colors"}," Create Wishlist ")])),k.value?(a(),r("div",nt,[o("div",ct,[s[6]||(s[6]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),o("div",ut,[o("p",pt,n(k.value),1)])])])):_("",!0),v.value?(a(),r("div",ht,[o("div",mt,[s[7]||(s[7]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"w-5 h-5 text-pink-600",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),o("div",vt,[o("p",gt,n(v.value),1)])])])):_("",!0),o("div",ft,[o("button",{onClick:s[1]||(s[1]=p=>u.$emit("close")),disabled:f.value,class:"flex-1 px-4 py-2 border-2 border-gray-300 text-gray-700 bg-white rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50"}," Cancel ",8,kt)])])])):_("",!0)}},bt=I(yt,[["__scopeId","data-v-501482ab"]]),wt="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3cpath%20d='M19.4626%203.99415C16.7809%202.34923%2014.4404%203.01211%2013.0344%204.06801C12.4578%204.50096%2012.1696%204.71743%2012%204.71743C11.8304%204.71743%2011.5422%204.50096%2010.9656%204.06801C9.55962%203.01211%207.21909%202.34923%204.53744%203.99415C1.01807%206.15294%200.221721%2013.2749%208.33953%2019.2834C9.88572%2020.4278%2010.6588%2021%2012%2021C13.3412%2021%2014.1143%2020.4278%2015.6605%2019.2834C23.7783%2013.2749%2022.9819%206.15294%2019.4626%203.99415Z'%20fill='%23DA9DFF'/%3e%3c/svg%3e",Ct="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3cpath%20d='M19.4626%203.99415C16.7809%202.34923%2014.4404%203.01211%2013.0344%204.06801C12.4578%204.50096%2012.1696%204.71743%2012%204.71743C11.8304%204.71743%2011.5422%204.50096%2010.9656%204.06801C9.55962%203.01211%207.21909%202.34923%204.53744%203.99415C1.01807%206.15294%200.221721%2013.2749%208.33953%2019.2834C9.88572%2020.4278%2010.6588%2021%2012%2021C13.3412%2021%2014.1143%2020.4278%2015.6605%2019.2834C23.7783%2013.2749%2022.9819%206.15294%2019.4626%203.99415Z'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",xt="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.5%2010C3.5%206.22876%203.5%204.34315%204.7448%203.17157C5.98959%202%207.99306%202%2012%202H12.7727C16.0339%202%2017.6645%202%2018.7969%202.79784C19.1214%203.02643%2019.4094%203.29752%2019.6523%203.60289C20.5%204.66867%2020.5%206.20336%2020.5%209.27273V11.8182C20.5%2014.7814%2020.5%2016.2629%2020.0311%2017.4462C19.2772%2019.3486%2017.6829%2020.8491%2015.6616%2021.5586C14.4044%2022%2012.8302%2022%209.68182%2022C7.88275%2022%206.98322%2022%206.26478%2021.7478C5.10979%2021.3424%204.19875%2020.4849%203.76796%2019.3979C3.5%2018.7217%203.5%2017.8751%203.5%2016.1818V10Z'%20fill='%23DA9DFF'%20stroke='white'%20stroke-width='1.5'%20stroke-linejoin='round'/%3e%3cpath%20d='M20.5%2012C20.5%2013.8409%2019.0076%2015.3333%2017.1667%2015.3333C16.5009%2015.3333%2015.716%2015.2167%2015.0686%2015.3901C14.4935%2015.5442%2014.0442%2015.9935%2013.8901%2016.5686C13.7167%2017.216%2013.8333%2018.0009%2013.8333%2018.6667C13.8333%2020.5076%2012.3409%2022%2010.5%2022'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%207H15'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2011H11'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",_t="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.5%2010C3.5%206.22876%203.5%204.34315%204.7448%203.17157C5.98959%202%207.99306%202%2012%202H12.7727C16.0339%202%2017.6645%202%2018.7969%202.79784C19.1214%203.02643%2019.4094%203.29752%2019.6523%203.60289C20.5%204.66867%2020.5%206.20336%2020.5%209.27273V11.8182C20.5%2014.7814%2020.5%2016.2629%2020.0311%2017.4462C19.2772%2019.3486%2017.6829%2020.8491%2015.6616%2021.5586C14.4044%2022%2012.8302%2022%209.68182%2022C7.88275%2022%206.98322%2022%206.26478%2021.7478C5.10979%2021.3424%204.19875%2020.4849%203.76796%2019.3979C3.5%2018.7217%203.5%2017.8751%203.5%2016.1818V10Z'%20stroke='%2314181F'%20stroke-width='1.5'%20stroke-linejoin='round'/%3e%3cpath%20d='M20.5%2012C20.5%2013.8409%2019.0076%2015.3333%2017.1667%2015.3333C16.5009%2015.3333%2015.716%2015.2167%2015.0686%2015.3901C14.4935%2015.5442%2014.0442%2015.9935%2013.8901%2016.5686C13.7167%2017.216%2013.8333%2018.0009%2013.8333%2018.6667C13.8333%2020.5076%2012.3409%2022%2010.5%2022'%20stroke='%2314181F'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%207H15'%20stroke='%2314181F'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2011H11'%20stroke='%2314181F'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",$t={class:"product-card bg-white rounded-2xl md:rounded-3xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300"},Ft={class:"product-image relative bg-white p-3 md:p-4"},Pt=["src","alt"],At={key:0,class:"product-actions absolute top-4 md:top-5 lg:top-6 right-4 md:right-5 lg:right-6 flex space-x-2 md:space-x-2.5 lg:space-x-3"},Bt=["title"],St=["src"],Mt=["disabled","title"],Wt=["src"],It={class:"product-info px-3 md:px-4 pb-3 md:pb-4"},Lt={class:"product-footer flex flex-col gap-3 md:gap-4 mt-2 md:mt-3"},Tt={class:"price-section"},jt={key:1,class:"flex items-baseline gap-1"},Dt={class:"product-price text-xl md:text-2xl font-medium text-gray-900 font-poppins"},Ht={class:"text-xs text-gray-500 font-poppins"},Nt={key:0,class:"product-buttons flex gap-2 md:gap-2.5 w-full"},Ot=["disabled"],Ut={key:0},Et={key:1},zt={key:2},Vt={key:3},qt={key:1,class:"product-buttons flex gap-2 md:gap-2.5 w-full"},Rt=["disabled"],Gt={key:0},Zt={key:1},Yt={key:2},Jt={key:3},Kt=["disabled"],Qt={key:0},Xt={key:1},te={key:2},ee={key:3},oe={__name:"ProductCard",props:{product:{type:Object,required:!0},isInWishlist:{type:Boolean,default:!1},isInList:{type:Boolean,default:!1},isInFavorites:{type:Boolean,default:!1},giftMode:{type:Boolean,default:!1},recipientUsername:{type:String,default:""}},emits:["navigate-to-product","add-to-cart","toggle-wishlist","toggle-list","favorite-updated"],setup(l,{emit:F}){const t=l,g=F,m=z(),{t:f}=V(),c=Y(),v=J(),k=K(),C=q(),u=R(),s=b(!1),p=b(t.isInFavorites),$=b(!1),y=b(!1),w=b(!1),L=S(()=>{const e=parseFloat(t.product.converted_price||t.product.price)||0;return console.log("ðŸ’° [PRODUCT CARD] Displaying price:",{product_name:t.product.name,converted_price:t.product.converted_price,price:t.product.price,final_price:e,formatted:u.formatPrice(e),currency:u.currentCurrency}),u.formatPrice(e)}),P=S(()=>parseFloat(t.product.converted_price||t.product.price)||0);M(()=>t.isInFavorites,e=>{p.value=e});const A=async e=>{if(y.value)return{available:!1,checking:!0};y.value=!0;try{console.log(`ðŸ“¦ [ProductCard] Verificando stock para producto ${e}...`);const i=await Z(`products/woocommerce/products/${e}/stock/`);if(i.data.success){const d=i.data.stock;return console.log("âœ… [ProductCard] Stock verificado:",{status:d.status,quantity:d.quantity,available:d.available}),!d.available||d.status==="outofstock"?(w.value=!0,{available:!1,stock:d}):(w.value=!1,{available:!0,stock:d})}return{available:!1}}catch(i){return console.error("âŒ [ProductCard] Error verificando stock:",i),{available:t.product.stock_status==="instock"}}finally{y.value=!1}},T=async()=>{if(!v.isLoggedIn){m.push({name:`Login-${C.locale}`});return}$.value=!0;try{p.value?(await k.removeProductFromFavorites(t.product.id)).success&&(p.value=!1,g("favorite-updated",{productId:t.product.id,isFavorited:!1})):(await k.addProductToFavorites(t.product.id)).success&&(p.value=!0,g("favorite-updated",{productId:t.product.id,isFavorited:!0}))}catch(e){console.error("Error toggling favorite:",e)}finally{$.value=!1}},j=()=>{if(!v.isLoggedIn){m.push({name:`Login-${C.locale}`});return}s.value=!0},D=e=>{console.log(`Product ${t.product.id} added to wishlist ${e}`)},H=()=>{s.value=!1,m.push({name:`ProfileWishlist-${C.locale}`})},N=async()=>{var i;if(console.log("ðŸ”µ [ProductCard] handleBuyNow clicked for product:",t.product.id),t.product.type==="variable"){g("navigate-to-product",t.product.id);return}const e=await A(t.product.id);if(!e.available){console.warn("âš ï¸ [ProductCard] Producto sin stock, no se puede comprar");return}try{const d=c.addToCart(t.product.id,1,{name:t.product.name,price:P.value,image:t.product.images&&t.product.images.length>0?t.product.images[0].src:null,stock_status:((i=e.stock)==null?void 0:i.status)||t.product.stock_status,variation_id:null});console.log("ðŸ”µ [ProductCard] handleBuyNow result:",d),d.success&&m.push({name:`Checkout-${C.locale}`})}catch(d){console.error("Error al comprar el producto:",d)}},O=async()=>{var i;if(console.log("ðŸŸ¢ [ProductCard] handleAddToCart clicked for product:",t.product.id),t.product.type==="variable"){g("navigate-to-product",t.product.id);return}const e=await A(t.product.id);if(!e.available){console.warn("âš ï¸ [ProductCard] Producto sin stock, no se puede agregar al carrito");return}try{const d=c.addToCart(t.product.id,1,{name:t.product.name,price:P.value,image:t.product.images&&t.product.images.length>0?t.product.images[0].src:null,stock_status:((i=e.stock)==null?void 0:i.status)||t.product.stock_status,variation_id:null});console.log("ðŸŸ¢ [ProductCard] handleAddToCart result:",d),d.success&&g("add-to-cart",t.product)}catch(d){console.error("Error adding product to cart:",d)}},U=async()=>{var i;if(console.log("ðŸŽ [ProductCard] handleBuyAsGift clicked for product:",t.product.id),console.log("ðŸŽ [ProductCard] Recipient username:",t.recipientUsername),t.product.type==="variable"){g("navigate-to-product",t.product.id);return}const e=await A(t.product.id);if(!e.available){console.warn("âš ï¸ [ProductCard] Producto sin stock, no se puede comprar como regalo");return}try{c.clearCart(),console.log("ðŸ—‘ï¸ [ProductCard] Carrito limpiado");const d=c.addToCart(t.product.id,1,{name:t.product.name,price:P.value,image:t.product.images&&t.product.images.length>0?t.product.images[0].src:null,stock_status:((i=e.stock)==null?void 0:i.status)||t.product.stock_status,variation_id:null});if(console.log("ðŸŽ [ProductCard] handleBuyAsGift result:",d),d.success){const B={name:`Checkout-${C.locale}`,query:{giftMode:"true",username:t.recipientUsername}};console.log("ðŸŽ [ProductCard] Redirecting to checkout:",B),m.push(B)}}catch(d){console.error("Error al comprar el producto como regalo:",d)}};return(e,i)=>(a(),r("div",$t,[o("div",Ft,[o("img",{src:l.product.images&&l.product.images.length>0?l.product.images[0].src:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=300&h=300&fit=crop&crop=center",alt:l.product.name,class:"w-full h-40 md:h-44 lg:h-48 object-contain cursor-pointer",onClick:i[0]||(i[0]=d=>e.$emit("navigate-to-product",l.product.id))},null,8,Pt),l.giftMode?_("",!0):(a(),r("div",At,[o("button",{onClick:x(j,["stop"]),class:"action-btn bg-white p-2 md:p-2.5 rounded-lg md:rounded-xl shadow-md hover:shadow-lg transition-all duration-200 hover:scale-110",title:e.$t("products.product.addToList")},[o("img",{src:l.isInList?h(xt):h(_t),alt:"List icon",class:"w-5 h-5 md:w-6 md:h-6"},null,8,St)],8,Bt),o("button",{onClick:x(T,["stop"]),disabled:$.value,class:"action-btn bg-white p-2 md:p-2.5 rounded-lg md:rounded-xl shadow-md hover:shadow-lg transition-all duration-200 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed",title:p.value?e.$t("products.product.removeFromFavorites"):e.$t("products.product.addToFavorites")},[o("img",{src:p.value?h(wt):h(Ct),alt:"Heart icon",class:"w-5 h-5 md:w-6 md:h-6"},null,8,Wt)],8,Mt)]))]),o("div",It,[o("h3",{class:"product-title text-sm md:text-base font-normal text-gray-900 mb-2 md:mb-3 cursor-pointer hover:text-brand-pink-dark transition-colors font-comfortaa line-clamp-2",onClick:i[1]||(i[1]=d=>e.$emit("navigate-to-product",l.product.id))},n(l.product.name),1),o("div",Lt,[o("div",Tt,[l.product.type==="variable"?(a(),r("span",{key:0,class:"product-price text-lg md:text-xl font-medium text-brand-pink-dark font-poppins italic cursor-pointer hover:text-brand-pink transition-colors",onClick:i[2]||(i[2]=d=>e.$emit("navigate-to-product",l.product.id))},n(e.$t("products.product.findMe")||"Find me âœ¨"),1)):(a(),r("div",jt,[o("span",Dt,n(L.value),1),o("span",Ht,n(h(u).currentCurrency),1)]))]),l.product.type!=="variable"?(a(),r(W,{key:0},[l.giftMode?(a(),r("div",Nt,[o("button",{onClick:x(U,["stop"]),disabled:w.value||h(c).isUpdating||y.value,class:"btn-gift text-white px-3 md:px-4 py-2 md:py-2.5 rounded-full text-xs md:text-sm font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-poppins hover:opacity-90 whitespace-nowrap flex-1",style:{"background-color":"#DA9DFF"}},[y.value?(a(),r("span",Ut,"â³")):w.value?(a(),r("span",Et,n(e.$t("products.product.outOfStock")||"Out of stock"),1)):h(c).isUpdating?(a(),r("span",zt,n(e.$t("products.product.adding")||"Adding..."),1)):(a(),r("span",Vt,n(e.$t("products.product.buyAsGift")||"Buy as Gift"),1))],8,Ot)])):(a(),r("div",qt,[o("button",{onClick:x(N,["stop"]),disabled:w.value||h(c).isUpdating||y.value,class:"btn-buy text-white px-3 md:px-4 py-2 md:py-2.5 rounded-full text-xs md:text-sm font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-poppins hover:opacity-90 flex-1",style:{"background-color":"#DA9DFF"}},[y.value?(a(),r("span",Gt,"â³")):w.value?(a(),r("span",Zt,n(e.$t("products.product.outOfStock")||"Out of stock"),1)):h(c).isUpdating?(a(),r("span",Yt,n(e.$t("products.product.adding")||"Adding..."),1)):(a(),r("span",Jt,n(e.$t("products.product.buyNow")||"Buy now"),1))],8,Rt),o("button",{onClick:x(O,["stop"]),disabled:w.value||h(c).isUpdating||y.value,class:"btn-cart text-white px-3 md:px-4 py-2 md:py-2.5 rounded-full text-xs md:text-sm font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-poppins hover:opacity-90 flex-1",style:{"background-color":"#DA9DFF"}},[y.value?(a(),r("span",Qt,"â³")):w.value?(a(),r("span",Xt,n(e.$t("products.product.outOfStock")||"Out of stock"),1)):h(c).isUpdating?(a(),r("span",te,n(e.$t("products.product.adding")||"Adding..."),1)):(a(),r("span",ee,n(e.$t("products.product.addToCart")||"Add to cart"),1))],8,Kt)]))],64)):_("",!0)])]),G(bt,{show:s.value,"product-id":l.product.id,onClose:i[3]||(i[3]=d=>s.value=!1),onAdded:D,onCreateWishlist:H},null,8,["show","product-id"])]))}},ne=I(oe,[["__scopeId","data-v-2bc51c51"]]);export{wt as H,xt as L,ne as P,bt as W,Ct as a};
