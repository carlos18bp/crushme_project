import{u as k,p as b,q as P,r as y,c as u,o as m,a as o,d as g,t as i,s as x,v as $,x as F,b as w,w as M,e as B,f as S,k as V}from"../index.js";import{u as C}from"./authStore-tY-7-Xic.js";import{L}from"./LanguageSelector-vuDdTwQ1.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-DjCFsGER.js";const R={class:"forgot-password-view"},N={class:"forgot-password-container"},E={class:"forgot-password-card"},I={class:"welcome-section"},T={class:"welcome-title"},D={class:"welcome-subtitle"},H={class:"input-group"},j=["placeholder"],A=["disabled"],U={key:0},Z={key:1,class:"loading-spinner"},z={class:"back-to-login"},G={__name:"ForgotPasswordView",setup(J){const p=V(),h=C(),f=k(),{t:r}=b(),a=P({email:""}),l=y(!1),v=()=>a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)?!0:(alert(r("forgotPassword.validation.validEmail")),!1):(alert(r("forgotPassword.validation.emailRequired")),!1),_=async()=>{var e,s,n,d;l.value=!0;try{if(!v())return;const t=await h.forgotPassword(a.email.trim());if(t.success)p.push({path:`/${f.locale}/reset-code`,query:{email:a.email.trim()}});else{let c=r("forgotPassword.errors.sendFailed");(e=t.error)!=null&&e.includes("not found")||(s=t.error)!=null&&s.includes("does not exist")?c=r("forgotPassword.errors.emailNotFound"):(n=t.error)!=null&&n.includes("too many")||(d=t.error)!=null&&d.includes("429")?c=r("forgotPassword.errors.tooManyRequests"):c+=t.error,alert(c)}}catch(t){console.error("Forgot password error:",t),alert(r("forgotPassword.errors.sendFailed")+(t.message||"Error desconocido"))}finally{l.value=!1}};return(e,s)=>{const n=S("router-link");return m(),u("div",R,[s[3]||(s[3]=o("div",{class:"background-container"},[o("div",{class:"background-overlay"})],-1)),g(L,{position:"absolute",theme:"light"}),o("div",N,[o("div",E,[o("div",I,[o("h2",T,i(e.$t("forgotPassword.title")),1),o("p",D,i(e.$t("forgotPassword.subtitle")),1)]),o("form",{onSubmit:x(_,["prevent"]),class:"forgot-password-form"},[o("div",H,[$(o("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>a.email=d),type:"email",placeholder:e.$t("forgotPassword.emailPlaceholder"),class:"form-input",required:""},null,8,j),[[F,a.email]])]),o("button",{type:"submit",class:"submit-btn",disabled:l.value},[l.value?(m(),u("span",Z,[s[1]||(s[1]=o("svg",{class:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4","stroke-opacity":"0.25"}),o("path",{d:"M4 12C4 16.4183 7.58172 20 12 20V12H4Z",fill:"currentColor"})],-1)),w(" "+i(e.$t("forgotPassword.sendingButton")),1)])):(m(),u("span",U,i(e.$t("forgotPassword.sendButton")),1))],8,A)],32),o("div",z,[g(n,{to:`/${B(f).locale}/login`,class:"back-link"},{default:M(()=>[s[2]||(s[2]=o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M19 12H5M5 12L12 19M5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),w(" "+i(e.$t("forgotPassword.backToLogin")),1)]),_:1},8,["to"])])])])])}}},Y=q(G,[["__scopeId","data-v-8b0168a8"]]);export{Y as default};
