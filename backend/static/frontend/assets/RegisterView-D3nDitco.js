import{u as j,p as $,q as V,r as m,c as a,o as d,a as e,d as k,t as u,s as B,v as g,x as v,y as f,b as C,w as S,e as q,f as E,k as R}from"../index.js";import{u as A}from"./authStore-BFns-WxD.js";import{u as L}from"./useAlert-P81MXwWp.js";import{L as F}from"./LanguageSelector-vuDdTwQ1.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-DjCFsGER.js";const U={class:"signup-view"},D={class:"signup-container"},H={class:"signup-card"},N={class:"welcome-section"},Z={class:"welcome-title"},T={class:"input-group"},z=["placeholder"],G={class:"input-group"},J=["placeholder"],K={class:"input-group"},O={class:"password-input-container"},Q=["type","placeholder"],W={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y={class:"input-group"},ee={class:"password-input-container"},se=["type","placeholder"],oe={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},te=["disabled"],ne={key:0},ie={key:1,class:"loading-spinner"},le={class:"signin-link"},ae={class:"signin-text"},de={__name:"RegisterView",setup(ue){const _=R(),y=A(),h=j(),{t:i}=$(),{showError:l}=L(),o=V({username:"",email:"",password:"",confirmPassword:""}),p=m(!1),c=m(!1),w=m(!1),x=()=>{p.value=!p.value},b=()=>{c.value=!c.value},M=()=>!o.username||!o.email||!o.password||!o.confirmPassword?(l(i("signup.validation.fillAllFields")),!1):o.username.trim().length<3?(l(i("signup.validation.usernameRequired")),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)?o.password.length<8?(l(i("signup.validation.passwordLength")),!1):o.password!==o.confirmPassword?(l(i("signup.validation.passwordsMatch")),!1):!0:(l(i("signup.validation.validEmail")),!1),P=async()=>{var r,s;w.value=!0;try{if(!M())return;const n=await y.register({username:o.username.trim(),email:o.email.trim(),password:o.password,password_confirm:o.confirmPassword});if(n.success)_.push({path:`/${h.locale}/verification`,query:{email:o.email.trim()}});else{let t=i("signup.errors.signupFailed");(r=n.error)!=null&&r.email?t=i("signup.errors.emailExists"):(s=n.error)!=null&&s.username?t=i("signup.errors.usernameExists"):typeof n.error=="string"?t+=n.error:t+="Error desconocido",l(t)}}catch(n){console.error("Signup error:",n),l(i("signup.errors.signupFailed")+(n.message||"Error desconocido"))}finally{w.value=!1}};return(r,s)=>{const n=E("router-link");return d(),a("div",U,[s[10]||(s[10]=e("div",{class:"background-container"},[e("div",{class:"background-overlay"})],-1)),k(F,{position:"absolute",theme:"light"}),e("div",D,[e("div",H,[e("div",N,[e("h2",Z,u(r.$t("signup.title")),1)]),e("form",{onSubmit:B(P,["prevent"]),class:"signup-form"},[e("div",T,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.username=t),type:"text",placeholder:r.$t("signup.usernamePlaceholder"),class:"form-input",required:""},null,8,z),[[v,o.username]])]),e("div",G,[g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.email=t),type:"email",placeholder:r.$t("signup.emailPlaceholder"),class:"form-input",required:""},null,8,J),[[v,o.email]])]),e("div",K,[e("div",O,[g(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.password=t),type:p.value?"text":"password",placeholder:r.$t("signup.passwordPlaceholder"),class:"form-input password-input",required:"",minlength:"8"},null,8,Q),[[f,o.password]]),e("button",{type:"button",onClick:x,class:"password-toggle"},[p.value?(d(),a("svg",X,[...s[5]||(s[5]=[e("path",{d:"M9.88 9.88C9.31 10.45 9 11.2 9 12C9 13.66 10.34 15 12 15C12.8 15 13.55 14.69 14.12 14.12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M10.73 5.08C11.15 5.03 11.57 5 12 5C19 5 23 12 23 12C22.18 13.65 20.69 15.12 18.8 16.17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M6.61 6.61C4.62 7.96 3.1 9.89 2 12C2 12 6 20 12 20C13.26 20 14.44 19.65 15.5 19.07",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("line",{x1:"2",y1:"2",x2:"22",y2:"22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(d(),a("svg",W,[...s[4]||(s[4]=[e("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),e("div",Y,[e("div",ee,[g(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.confirmPassword=t),type:c.value?"text":"password",placeholder:r.$t("signup.confirmPasswordPlaceholder"),class:"form-input password-input",required:""},null,8,se),[[f,o.confirmPassword]]),e("button",{type:"button",onClick:b,class:"password-toggle"},[c.value?(d(),a("svg",re,[...s[7]||(s[7]=[e("path",{d:"M9.88 9.88C9.31 10.45 9 11.2 9 12C9 13.66 10.34 15 12 15C12.8 15 13.55 14.69 14.12 14.12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M10.73 5.08C11.15 5.03 11.57 5 12 5C19 5 23 12 23 12C22.18 13.65 20.69 15.12 18.8 16.17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M6.61 6.61C4.62 7.96 3.1 9.89 2 12C2 12 6 20 12 20C13.26 20 14.44 19.65 15.5 19.07",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("line",{x1:"2",y1:"2",x2:"22",y2:"22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(d(),a("svg",oe,[...s[6]||(s[6]=[e("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),e("button",{type:"submit",class:"submit-btn",disabled:w.value},[w.value?(d(),a("span",ie,[s[8]||(s[8]=e("svg",{class:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4","stroke-opacity":"0.25"}),e("path",{d:"M4 12C4 16.4183 7.58172 20 12 20V12H4Z",fill:"currentColor"})],-1)),C(" "+u(r.$t("signup.creatingAccount")),1)])):(d(),a("span",ne,u(r.$t("signup.createAccountButton")),1))],8,te)],32),e("div",le,[e("span",ae,u(r.$t("signup.alreadyHave")),1),k(n,{to:`/${q(h).locale}/login`,class:"signin-link-text"},{default:S(()=>[C(u(r.$t("signup.signIn"))+" ",1),s[9]||(s[9]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),_:1},8,["to"])])])])])}}},ke=I(de,[["__scopeId","data-v-baa7bdab"]]);export{ke as default};
