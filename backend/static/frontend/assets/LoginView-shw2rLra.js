import{u as x,s as M,x as $,r as k,c as a,b as d,d as o,f as g,t as r,y as B,p as m,z as V,A as L,B as j,w as v,g as f,h as A,e as w,m as S}from"../index.js";import{u as I}from"./authStore-C7CjBt1i.js";import{u as P}from"./useAlert-BgI_2DEv.js";import{L as D}from"./LanguageSelector-Cde5xz4W.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-DjCFsGER.js";const q={class:"login-view"},E={class:"login-container"},F={class:"login-card"},H={class:"welcome-section"},N={class:"welcome-title"},R={class:"input-group"},U=["placeholder"],Z={class:"input-group"},z={class:"password-input-container"},G=["type","placeholder"],J={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},O={class:"form-options"},Q={class:"remember-me"},W={class:"checkbox-text"},X=["disabled"],Y={key:0},oo={key:1,class:"loading-spinner"},eo={class:"signup-link"},so={class:"signup-text"},to={__name:"LoginView",setup(ro){const _=S(),C=I(),i=x(),{t:n}=M(),{showError:p}=P(),t=$({username:"",password:"",rememberMe:!1}),c=k(!1),u=k(!1),y=()=>{c.value=!c.value},b=async()=>{u.value=!0;try{if(!t.username||!t.password){p(n("login.validation.fillAllFields"));return}const s=await C.login({username:t.username,password:t.password});s.success?_.push({path:`/${i.locale}/confirmation`,query:{title:n("login.success.title"),message:n("login.success.message"),primaryActionText:n("login.success.actionButton"),primaryActionRoute:`/${i.locale}/profile`,autoRedirect:"true",redirectDelay:"3",redirectTo:`/${i.locale}/profile`}}):p(n("login.errors.loginFailed")+s.error)}catch(s){console.error("Login error:",s),p(n("login.errors.loginFailed")+(s.message||"Error desconocido"))}finally{u.value=!1}};return(s,e)=>{const h=A("router-link");return d(),a("div",q,[e[7]||(e[7]=o("div",{class:"background-container"},[o("div",{class:"background-overlay"})],-1)),g(D,{position:"absolute",theme:"light"}),o("div",E,[o("div",F,[o("div",H,[o("h2",N,r(s.$t("login.title")),1)]),o("form",{onSubmit:B(b,["prevent"]),class:"login-form"},[o("div",R,[m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.username=l),type:"text",placeholder:s.$t("login.usernamePlaceholder"),class:"form-input",required:""},null,8,U),[[V,t.username]])]),o("div",Z,[o("div",z,[m(o("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.password=l),type:c.value?"text":"password",placeholder:s.$t("login.passwordPlaceholder"),class:"form-input password-input",required:""},null,8,G),[[L,t.password]]),o("button",{type:"button",onClick:y,class:"password-toggle"},[c.value?(d(),a("svg",K,[...e[4]||(e[4]=[o("path",{d:"M9.88 9.88C9.31 10.45 9 11.2 9 12C9 13.66 10.34 15 12 15C12.8 15 13.55 14.69 14.12 14.12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("path",{d:"M10.73 5.08C11.15 5.03 11.57 5 12 5C19 5 23 12 23 12C22.18 13.65 20.69 15.12 18.8 16.17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("path",{d:"M6.61 6.61C4.62 7.96 3.1 9.89 2 12C2 12 6 20 12 20C13.26 20 14.44 19.65 15.5 19.07",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("line",{x1:"2",y1:"2",x2:"22",y2:"22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(d(),a("svg",J,[...e[3]||(e[3]=[o("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),o("div",O,[o("label",Q,[m(o("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.rememberMe=l),type:"checkbox",class:"checkbox"},null,512),[[j,t.rememberMe]]),o("span",W,r(s.$t("login.rememberMe")),1)]),g(h,{to:`/${f(i).locale}/forgot-password`,class:"forgot-password"},{default:v(()=>[w(r(s.$t("login.forgotPassword")),1)]),_:1},8,["to"])]),o("button",{type:"submit",class:"submit-btn",disabled:u.value},[u.value?(d(),a("span",oo,[e[5]||(e[5]=o("svg",{class:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4","stroke-opacity":"0.25"}),o("path",{d:"M4 12C4 16.4183 7.58172 20 12 20V12H4Z",fill:"currentColor"})],-1)),w(" "+r(s.$t("login.signingIn")),1)])):(d(),a("span",Y,r(s.$t("login.signInButton")),1))],8,X)],32),o("div",eo,[o("span",so,r(s.$t("login.newHere")),1),g(h,{to:`/${f(i).locale}/signup`,class:"signup-link-text"},{default:v(()=>[w(r(s.$t("login.createAccount"))+" ",1),e[6]||(e[6]=o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),_:1},8,["to"])])])])])}}},po=T(to,[["__scopeId","data-v-570bee81"]]);export{po as default};
