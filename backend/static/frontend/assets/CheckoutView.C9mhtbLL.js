import{r as f,o as ye,O as we,E as J,c as l,b as n,d as t,N as We,u as Ve,l as k,m as Fe,j as h,t as r,p as y,P as ge,e as A,z as D,F,H as ne,Q as He,i as K,g as H,f as Re,G as Me,k as qe}from"./index.T4J3j10_.js";import{u as Ge}from"./cartStore.DdzdLVyM.js";import{u as Ye}from"./authStore.Dv_d0n5Q.js";import{u as ze}from"./crushStore.BI4ZUKYe.js";import{u as Be}from"./paymentStore.GI-RI2mV.js";import{u as Ke}from"./productStore.BKbUTQJY.js";import{u as Je}from"./useAlert.B5qtsvDq.js";import{C as je,S as xe}from"./state.DRCieogr.js";import{_ as Ce}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./constants.DjCFsGER.js";const Qe={class:"wompi-widget-container"},Xe={__name:"WompiWidget",props:{widgetData:{type:Object,required:!0},renderMode:{type:String,default:"button"}},setup(ie){const u=ie,v=f(null);let i=null;ye(()=>{O()}),we(()=>{i&&i.parentNode&&i.parentNode.removeChild(i)}),J(()=>u.widgetData,()=>{O()},{deep:!0});function O(){if(console.log("ðŸ”µ [WOMPI WIDGET] Loading widget with data:",u.widgetData),!v.value||!u.widgetData){console.warn("âš ï¸ [WOMPI WIDGET] Form ref or widget data not ready");return}i&&i.parentNode&&i.parentNode.removeChild(i),i=document.createElement("script"),i.src="https://checkout.wompi.co/widget.js",i.setAttribute("data-render",u.renderMode),i.setAttribute("data-public-key",u.widgetData.public_key),i.setAttribute("data-currency",u.widgetData.currency),i.setAttribute("data-amount-in-cents",u.widgetData.amount_in_cents),i.setAttribute("data-reference",u.widgetData.reference),i.setAttribute("data-signature:integrity",u.widgetData.signature),i.setAttribute("data-redirect-url",u.widgetData.redirect_url),u.widgetData.customer_data&&(i.setAttribute("data-customer-data:email",u.widgetData.customer_data.email),i.setAttribute("data-customer-data:full-name",u.widgetData.customer_data.full_name),u.widgetData.customer_data.phone_number&&i.setAttribute("data-customer-data:phone-number",u.widgetData.customer_data.phone_number),u.widgetData.customer_data.phone_number_prefix&&i.setAttribute("data-customer-data:phone-number-prefix",u.widgetData.customer_data.phone_number_prefix)),v.value.appendChild(i),S(),console.log("âœ… [WOMPI WIDGET] Widget script loaded")}function S(){window.addEventListener("message",messageHandler);const $=setInterval(()=>{const g=localStorage.getItem("wompi_last_transaction");if(g)try{const I=JSON.parse(g);I.id&&I.reference===u.widgetData.reference&&(console.log("âœ… [WOMPI WIDGET] TransacciÃ³n detectada via localStorage:",I),clearInterval($),window.removeEventListener("message",messageHandler),window.location.href=`${u.widgetData.redirect_url}?id=${I.id}`)}catch{}},1e3);setTimeout(()=>{clearInterval($)},3e5)}return($,g)=>(n(),l("div",Qe,[t("form",{ref_key:"wompiForm",ref:v},null,512)]))}},Ze=Ce(Xe,[["__scopeId","data-v-383b8ce4"]]),et={class:"checkout-view"},tt={class:"checkout-container"},ot={class:"shipping-section"},at={class:"shipping-card"},st={class:"section-title"},rt={class:"shipping-type"},lt={class:"radio-label"},nt={class:"radio-label"},it={class:"form-group"},ct={for:"email"},ut=["placeholder"],dt={key:0,class:"gift-field-description"},pt={class:"form-group"},mt={for:"fullname"},vt=["placeholder"],ht={class:"form-group"},ft={for:"country"},gt={class:"form-group"},_t={for:"address1"},yt=["placeholder"],wt={class:"form-group"},Ct={for:"address2"},Pt=["placeholder"],bt={class:"form-group"},kt={for:"city"},St=["placeholder"],Dt={key:0,class:"city-shipping-info"},$t={class:"form-row"},It={class:"form-group"},Et={for:"state"},At={value:""},Ut=["value"],Ot={class:"form-group"},Nt={for:"zipcode"},Tt=["placeholder"],Lt={class:"form-group"},Wt={for:"phone"},Vt={class:"phone-input"},Ft=["value"],Ht=["placeholder"],Rt={class:"form-group"},Mt={for:"additional"},qt=["placeholder"],Gt={class:"form-group"},Yt={for:"username"},zt={class:"username-search-container"},Bt=["placeholder"],Kt={key:0,class:"username-search-results"},Jt=["onMousedown"],jt=["src","alt"],xt={class:"search-user-info"},Qt={class:"search-username"},Xt={key:0,class:"search-crush-label"},Zt={class:"gift-field-description"},eo={class:"form-group"},to={for:"note"},oo=["placeholder"],ao={class:"form-group payment-button-section"},so=["disabled"],ro={key:0,class:"payment-error"},lo={key:2,id:"wompi-widget-section",class:"wompi-section"},no={key:3,id:"paypal-section",class:"paypal-section"},io={class:"paypal-title"},co={class:"summary-section"},uo={class:"summary-card"},po={class:"section-title"},mo={key:0,class:"loading-state"},vo={key:1,class:"products-list"},ho={class:"product-image"},fo=["src","alt"],go={class:"product-details"},_o={class:"product-name"},yo={key:0,class:"product-meta"},wo={key:1,class:"product-meta"},Co={key:2,class:"product-meta"},Po={key:3,class:"product-meta variation-id"},bo={class:"product-quantity"},ko={class:"product-price"},So={class:"discount-section"},Do={class:"discount-title"},$o={key:0,class:"discount-input"},Io=["placeholder","disabled"],Eo=["disabled"],Ao={key:1,class:"discount-applied"},Uo={class:"discount-applied-content"},Oo={class:"discount-code-badge"},No={class:"discount-percentage"},To={key:2,class:"discount-error"},Lo={class:"totals-section"},Wo={class:"total-row"},Vo={class:"subtotal-values"},Fo={key:0,class:"original-subtotal"},Ho={class:"total-row"},Ro={class:"total-value"},Mo={key:0,class:"shipping-city-note"},qo={key:1,class:"shipping-city-note"},Go={key:0,class:"total-row discount-row"},Yo={class:"discount-label"},zo={class:"total-value discount-value"},Bo={class:"total-row tax-row"},Ko={class:"tax-included-badge"},Jo={class:"total-value tax-included-value"},jo={class:"final-total"},xo={class:"total-row"},Qo={class:"total-label"},Xo={class:"total-amount"},Zo={class:"tax-note"},_e=48500,ea={__name:"CheckoutView",setup(ie){const u=Fe(),v=We(),i=e=>v.formatPrice(e),O=e=>v.currentCurrency==="USD"?Math.round(e/4e3*100)/100:e,S=Ge(),$=Ye(),g=ze(),I=Ve(),R=Be(),Pe=Ke(),{showSuccess:ce,showError:b,showLoading:ue,closeAlert:j}=Je(),be=je.getAllCountries().map(e=>({...e,flag:e.flag||"ðŸ³ï¸"})),ke=[{code:"CO",dial_code:"+57",flag:"ðŸ‡¨ðŸ‡´",name:"Colombia"}],_=f("me"),s=f({email:"",fullName:"",country:"CO",address1:"",address2:"",city:"",state:"",zipCode:"",phoneCode:"+57",phone:"",additionalDetails:"",username:"",note:""}),N=f(""),c=f(null),W=f(""),z=f(!1),E=f(""),ee=f(!1),te=f(!1),U=f(null),de=f(!1),T=f(""),V=f(!1),m=f(null);let L=null;const x=f(null),oe=f(null),Se=k(()=>xe.getStatesOfCountry("CO")),De=k(()=>S.items),pe=k(()=>$.isLoggedIn&&$.username),$e=k(()=>m.value&&m.value.username?I.locale==="es"?`Nota para @${m.value.username}`:`Note for @${m.value.username}`:I.locale==="es"?"Nota para el destinatario":"Note for recipient"),Ie=async e=>{if(!e||!e.trim()){g.clearSearch();return}try{await g.searchUsers(e.trim(),5)}catch(a){console.error("Error searching users:",a)}},Ee=()=>{setTimeout(()=>{V.value=!1},200)},me=e=>{console.log("ðŸ‘¤ [SELECT USER] Usuario seleccionado:",e),m.value=e,V.value=!1,g.clearSearch(),L&&(clearTimeout(L),L=null),s.value.username=`@${e.username}`,T.value=`@${e.username}`,console.log("ðŸ’° [SELECT USER] Costo de envÃ­o del usuario:",e.shipping_cost)};J(T,e=>{if(s.value.username=e,L&&clearTimeout(L),!e.trim()){g.clearSearch(),V.value=!1,m.value=null;return}if(m.value&&e===`@${m.value.username}`){console.log("â­ï¸ [WATCH] Usuario ya seleccionado, no buscar de nuevo");return}L=setTimeout(async()=>{await Ie(e),V.value=g.searchResults.length>0},300)}),J(_,e=>{e!=="gift"&&(T.value="",V.value=!1,m.value=null,g.clearSearch())}),J(()=>s.value.username,e=>{_.value==="gift"&&e!==T.value&&(T.value=e)});const Ae=async()=>{de.value=!0;try{console.log(`ðŸ“¦ [DROPSHIPPING] Consultando producto ${_e}...`);const e=await Pe.fetchWooProduct(_e);e.success&&e.data?(U.value=e.data,console.log("âœ… [DROPSHIPPING] Producto cargado:",{id:e.data.id,name:e.data.name,price:e.data.price})):console.error("âŒ [DROPSHIPPING] Error al cargar producto:",e.error)}catch(e){console.error("âŒ [DROPSHIPPING] Error inesperado:",e)}finally{de.value=!1}},M=k(()=>S.totalPrice),ae=k(()=>{if(_.value==="me"){const e=!!(s.value.email&&s.value.fullName&&s.value.address1&&s.value.city&&s.value.state&&s.value.zipCode&&s.value.phone);return e||console.log("ðŸ” [VALIDATION] Campos faltantes:",{email:!!s.value.email,fullName:!!s.value.fullName,address1:!!s.value.address1,city:!!s.value.city,state:!!s.value.state,zipCode:!!s.value.zipCode,phone:!!s.value.phone}),e}return _.value==="gift"?!!(s.value.email&&s.value.username):!1}),Ue=async()=>{var e,a,o,d,w,p,C;E.value="";try{if(console.log("ðŸ“¦ [CHECKOUT] Preparando datos para pago..."),!ae.value){E.value="Por favor completa todos los campos obligatorios",await b("Completa todos los campos obligatorios antes de continuar.","âš ï¸ Campos Incompletos");return}if(!S.items||S.items.length===0){E.value="El carrito estÃ¡ vacÃ­o",await b("Tu carrito estÃ¡ vacÃ­o.","ðŸ›’ Carrito VacÃ­o");return}const Z=be.find(P=>P.isoCode===s.value.country),fe=Z?Z.name:s.value.country,le=S.items.map(P=>({woocommerce_product_id:P.product_id||P.id,woocommerce_variation_id:P.variation_id||null,product_name:P.name,quantity:P.quantity,unit_price:v.currentCurrency==="USD"?parseFloat(parseFloat(P.price).toFixed(2)):parseFloat(P.price),attributes:P.attributes||null}));U.value&&(le.push({woocommerce_product_id:U.value.id,woocommerce_variation_id:null,product_name:U.value.name,quantity:1,unit_price:v.currentCurrency==="USD"?parseFloat(parseFloat(U.value.price).toFixed(2)):parseFloat(U.value.price),attributes:null}),console.log("ðŸ“¦ [DROPSHIPPING] Producto agregado a items"));let Y;_.value==="gift"?(Y={items:le,customer_email:s.value.email,customer_name:pe.value?`${((e=$.user)==null?void 0:e.first_name)||""} ${((a=$.user)==null?void 0:a.last_name)||""}`.trim()||$.username:s.value.email,receiver_username:s.value.username.replace("@",""),gift_message:s.value.note||"",is_gift:!0,shipping:v.currentCurrency==="USD"?parseFloat(q.value.toFixed(2)):q.value,total:v.currentCurrency==="USD"?parseFloat(G.value.toFixed(2)):G.value,discount_code:c.value?c.value.code:null,is_from_wishlist:!!x.value,wishlist_id:x.value||null,wishlist_name:oe.value||null,shipping_address:((o=m.value)==null?void 0:o.address)||"DirecciÃ³n del destinatario",shipping_city:((d=m.value)==null?void 0:d.city)||"Ciudad",shipping_state:((w=m.value)==null?void 0:w.state)||"Departamento",shipping_postal_code:((p=m.value)==null?void 0:p.postal_code)||"00000",shipping_country:fe,phone_number:((C=m.value)==null?void 0:C.phone)||"+57 300 0000000"},pe.value&&(Y.sender_username=$.username)):Y={items:le,customer_email:s.value.email,customer_name:s.value.fullName,shipping_address:s.value.address1,shipping_address_line_2:s.value.address2||"",shipping_city:s.value.city,shipping_state:s.value.state,shipping_postal_code:s.value.zipCode,shipping_country:fe,phone_number:`${s.value.phoneCode} ${s.value.phone}`,notes:s.value.additionalDetails||"",shipping:v.currentCurrency==="USD"?parseFloat(q.value.toFixed(2)):q.value,total:v.currentCurrency==="USD"?parseFloat(G.value.toFixed(2)):G.value,discount_code:c.value?c.value.code:null},console.log("ðŸ“¤ [CHECKOUT] Datos de orden preparados:",Y),c.value&&console.log("ðŸŽŸï¸ [DISCOUNT] CÃ³digo de descuento incluido en orden:",{code:c.value.code,percentage:c.value.discount_percentage,subtotal_original:M.value,descuento:X.value,subtotal_con_descuento:B.value,total_final:G.value}),v.currentCurrency==="COP"?await Oe(Y):(sessionStorage.setItem("checkout_order_data",JSON.stringify(Y)),ee.value=!0,setTimeout(()=>{const P=document.getElementById("paypal-section");P&&P.scrollIntoView({behavior:"smooth",block:"center"})},100))}catch(Z){console.error("âŒ [CHECKOUT] Error al preparar datos:",Z),E.value="Error al preparar la orden",await b("Error al preparar la orden.","âŒ Error")}},se=f(null),ve=f(!1),Oe=async e=>{try{ue("Preparando pago...","ðŸ’³ Wompi"),console.log("ðŸ’³ [WOMPI] Iniciando pago con Widget...",e);const a=await R.createWompiTransaction(e);if(j(),!a.success){E.value=a.error||"Error al preparar pago con Wompi",await b(E.value,"âŒ Error en Wompi");return}console.log("âœ… [WOMPI] Widget data recibida:",a.data),localStorage.setItem("wompi_reference",a.data.reference),localStorage.setItem("wompi_order_data",JSON.stringify(e)),localStorage.setItem("wompi_widget_data",JSON.stringify(a.data.widget_data)),se.value=a.data.widget_data,ve.value=!0,setTimeout(()=>{const o=document.getElementById("wompi-widget-section");o&&o.scrollIntoView({behavior:"smooth",block:"center"})},100)}catch(a){j(),console.error("âŒ [WOMPI] Error inesperado:",a),E.value="Error al procesar el pago con Wompi",await b(E.value,"âŒ Error")}},Ne=async()=>new Promise(async(e,a)=>{if(window.paypal){console.log("ðŸ’³ [PAYPAL] SDK ya estÃ¡ cargado"),te.value=!0,e();return}const o=document.querySelector('script[src*="paypal.com/sdk/js"]');if(o){o.addEventListener("load",()=>{console.log("ðŸ’³ [PAYPAL] SDK cargado desde script existente"),te.value=!0,e()});return}console.log("ðŸ’³ [PAYPAL] Cargando SDK...");const d="AXOC4gQsXk_e8NhrrZRorJzU3rld7lOJP5_2S8RYDKUgjkDT-2wfc-1Eu1AqYQseWTcJA_VBEnGUUGCQ",w=v.currentCurrency;console.log("ðŸ’³ [PAYPAL] Client ID:",d),console.log("ðŸ’³ [PAYPAL] Currency:",w);const p=document.createElement("script");p.src=`https://www.paypal.com/sdk/js?client-id=${d}&currency=${w}&components=buttons`,p.setAttribute("data-sdk-integration-source","developer-studio"),p.onload=()=>{console.log("âœ… [PAYPAL] SDK cargado exitosamente"),te.value=!0,e()},p.onerror=C=>{console.error("âŒ [PAYPAL] Error al cargar SDK:",C),a(C)},document.head.appendChild(p)}),Te=()=>{if(!window.paypal){console.error("âŒ [PAYPAL] SDK no estÃ¡ disponible");return}const e=document.getElementById("paypal-button-container");if(!e){console.error("âŒ [PAYPAL] Contenedor no encontrado");return}e.innerHTML="";const a=sessionStorage.getItem("checkout_order_data");if(!a){console.error("âŒ [PAYPAL] No hay datos de orden");return}const o=JSON.parse(a);window.paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal"},createOrder:async(d,w)=>{console.log("ðŸ’³ [PAYPAL] Creando orden...");try{if(o.is_gift){const C=await R.sendGift(o);if(!C.success)throw new Error(C.error);return C.paypal_order_id}const p=await R.createPayPalOrder(o);if(!p.success)throw new Error(p.error);return p.paypal_order_id}catch(p){throw console.error("âŒ [PAYPAL] Error al crear orden:",p),await b(p.message||"Error al crear orden","âŒ Error"),p}},onApprove:async(d,w)=>{console.log("âœ… [PAYPAL] Pago aprobado");try{ue("Procesando tu pago...","ðŸ’³ Procesando");const p={paypal_order_id:d.orderID,...o},C=await R.capturePayPalOrder(d.orderID,p);if(j(),!C.success)throw new Error(C.error);console.log("âœ… [PAYPAL] Pago procesado exitosamente"),await ce(`Tu orden ha sido creada exitosamente.

ðŸ“‹ Orden: ${C.order.order_number}
ðŸ’° Total: $${C.order.total}

RecibirÃ¡s un email de confirmaciÃ³n pronto.`,"ðŸŽ‰ Â¡Pago Exitoso!",{timer:8e3}),sessionStorage.removeItem("checkout_order_data"),S.clearCart(),R.clearPaymentState(),setTimeout(()=>{u.push({name:`Home-${I.locale}`})},1e3)}catch(p){console.error("âŒ [PAYPAL] Error al capturar pago:",p),j(),await b(p.message||"Error al procesar el pago","âŒ Error")}},onCancel:d=>{console.log("âš ï¸ [PAYPAL] Pago cancelado"),b("Has cancelado el proceso de pago.","âš ï¸ Pago Cancelado",{timer:5e3})},onError:d=>{console.error("âŒ [PAYPAL] Error:",d),b("Hubo un error con PayPal. Por favor intenta de nuevo.","âŒ Error en PayPal")}}).render("#paypal-button-container")},he=async()=>{var e,a;if(!N.value||!N.value.trim()){W.value="Por favor ingresa un cÃ³digo de descuento";return}z.value=!0,W.value="";try{console.log("ðŸŽŸï¸ [DISCOUNT] Validando cÃ³digo:",N.value);const o=await R.validateDiscountCode(N.value.trim().toUpperCase());console.log("ðŸŽŸï¸ [DISCOUNT] Respuesta:",o),o.success&&o.data.exists&&o.data.is_valid?(c.value={code:o.data.code,discount_percentage:parseFloat(o.data.discount_percentage)},await ce(`Â¡CÃ³digo aplicado! Descuento del ${o.data.discount_percentage}%`,"ðŸŽ‰ Descuento Aplicado"),console.log("âœ… [DISCOUNT] Descuento aplicado:",c.value)):(c.value=null,W.value=((e=o.data)==null?void 0:e.message)||o.error||"CÃ³digo de descuento no vÃ¡lido",await b(((a=o.data)==null?void 0:a.message)||o.error||"El cÃ³digo ingresado no es vÃ¡lido o ha expirado","âŒ CÃ³digo InvÃ¡lido"))}catch(o){console.error("âŒ [DISCOUNT] Error al validar:",o),c.value=null,W.value="Error al validar el cÃ³digo",await b("Hubo un error al validar el cÃ³digo. Por favor intenta de nuevo.","âŒ Error")}finally{z.value=!1}},Le=()=>{c.value=null,N.value="",W.value="",console.log("ðŸ—‘ï¸ [DISCOUNT] Descuento removido")},q=k(()=>{if(_.value==="gift"&&m.value&&m.value.shipping_cost){const a=parseFloat(m.value.shipping_cost),o=O(a);return console.log(`ðŸ“¦ [SHIPPING] Costo del usuario destinatario: ${a} COP â†’ ${o} ${v.currentCurrency}`),o}const e=(s.value.city||"").toLowerCase().trim();if(!e)return O(15e3);switch(e){case"medellÃ­n":case"medellin":return O(10500);case"san andrÃ©s isla":case"san andres isla":case"san andrÃ©s":case"san andres":case"santa catalina":case"providencia":return O(45e3);default:return O(15e3)}}),Q=k(()=>{let e=q.value;if(U.value&&U.value.price){const a=parseFloat(U.value.price);e+=a,console.log(`ðŸ“¦ [DROPSHIPPING] Shipping mostrado: ${q.value} + ${a} = ${e}`)}return e}),re=k(()=>B.value*(.19/1.19)),X=k(()=>{if(!c.value)return 0;const e=M.value*c.value.discount_percentage/100;return console.log("ðŸŽŸï¸ [DISCOUNT] Monto calculado:",{subtotal:M.value,percentage:c.value.discount_percentage,discount:e}),e}),B=k(()=>M.value-X.value),G=k(()=>{const e=B.value+Q.value;return console.log("ðŸ’° [TOTAL] CÃ¡lculo:",{subtotal:M.value,discount:X.value,subtotal_after_discount:B.value,shipping:Q.value,tax_included:re.value,total:e}),e});return ye(async()=>{if(S.loadCart(),S.isEmpty){u.push({name:`Cart-${I.locale}`});return}const e=u.currentRoute.value;if(e.query.giftMode==="true"){if(_.value="gift",e.query.username){const a=e.query.username,o=a.startsWith("@")?a:`@${a}`;s.value.username=o,T.value=o;try{const d=a.replace("@","").trim();if(console.log("ðŸ” [CHECKOUT] Buscando usuario automÃ¡ticamente:",d),await g.searchUsers(d,5),g.searchResults.length>0){const w=g.searchResults.find(p=>p.username.toLowerCase()===d.toLowerCase());w?(console.log("âœ… [CHECKOUT] Usuario encontrado automÃ¡ticamente:",w),me(w)):console.warn("âš ï¸ [CHECKOUT] No se encontrÃ³ coincidencia exacta para:",d)}else console.warn("âš ï¸ [CHECKOUT] No se encontraron resultados para:",d)}catch(d){console.error("âŒ [CHECKOUT] Error al buscar usuario automÃ¡ticamente:",d)}}e.query.wishlistId&&(x.value=parseInt(e.query.wishlistId),oe.value=e.query.wishlistName||null,console.log("ðŸŽ [WISHLIST] Compra desde wishlist:",{id:x.value,name:oe.value}))}await Ae()}),J(ee,async e=>{if(e&&v.currentCurrency==="USD")try{await Ne(),setTimeout(()=>{Te()},100)}catch(a){console.error("âŒ [PAYPAL] Error al inicializar:",a),await b("No se pudo cargar PayPal.","âŒ Error")}}),we(()=>{L&&clearTimeout(L),m.value=null,g.clearSearch()}),(e,a)=>(n(),l("div",et,[t("div",tt,[t("div",ot,[t("div",at,[t("h2",st,r(e.$t("cart.checkout.shippingInformation")),1),t("div",rt,[t("label",lt,[y(t("input",{type:"radio",name:"shipping-type",value:"me","onUpdate:modelValue":a[0]||(a[0]=o=>_.value=o),checked:""},null,512),[[ge,_.value]]),t("span",null,r(e.$t("cart.checkout.shippingType.forMe")),1)]),t("label",nt,[y(t("input",{type:"radio",name:"shipping-type",value:"gift","onUpdate:modelValue":a[1]||(a[1]=o=>_.value=o)},null,512),[[ge,_.value]]),t("span",null,r(e.$t("cart.checkout.shippingType.forGift")),1)])]),t("div",it,[t("label",ct,[A(r(_.value==="gift"?e.$t("cart.checkout.form.emailGift"):e.$t("cart.checkout.form.email"))+" ",1),a[17]||(a[17]=t("span",{class:"text-red-500"},"*",-1))]),y(t("input",{type:"email",id:"email","onUpdate:modelValue":a[2]||(a[2]=o=>s.value.email=o),placeholder:_.value==="gift"?e.$t("cart.checkout.form.placeholders.emailGift"):e.$t("cart.checkout.form.placeholders.email"),class:"form-input",required:""},null,8,ut),[[D,s.value.email]]),_.value==="gift"?(n(),l("p",dt,r(e.$t("cart.checkout.form.help.emailGift")),1)):h("",!0)]),_.value==="me"?(n(),l(F,{key:0},[t("div",pt,[t("label",mt,[A(r(e.$t("cart.checkout.form.fullName"))+" ",1),a[18]||(a[18]=t("span",{class:"text-red-500"},"*",-1))]),y(t("input",{type:"text",id:"fullname","onUpdate:modelValue":a[3]||(a[3]=o=>s.value.fullName=o),placeholder:e.$t("cart.checkout.form.placeholders.fullName"),class:"form-input",required:""},null,8,vt),[[D,s.value.fullName]])]),t("div",ht,[t("label",ft,r(e.$t("cart.checkout.form.country")),1),y(t("select",{id:"country","onUpdate:modelValue":a[4]||(a[4]=o=>s.value.country=o),class:"form-input form-select",disabled:""},[...a[19]||(a[19]=[t("option",{value:"CO"},"ðŸ‡¨ðŸ‡´ Colombia",-1)])],512),[[ne,s.value.country]])]),t("div",gt,[t("label",_t,[A(r(e.$t("cart.checkout.form.address1"))+" ",1),a[20]||(a[20]=t("span",{class:"text-red-500"},"*",-1))]),y(t("input",{type:"text",id:"address1","onUpdate:modelValue":a[5]||(a[5]=o=>s.value.address1=o),placeholder:e.$t("cart.checkout.form.placeholders.address1"),class:"form-input",required:""},null,8,yt),[[D,s.value.address1]])]),t("div",wt,[t("label",Ct,r(e.$t("cart.checkout.form.address2")),1),y(t("input",{type:"text",id:"address2","onUpdate:modelValue":a[6]||(a[6]=o=>s.value.address2=o),placeholder:e.$t("cart.checkout.form.placeholders.address2"),class:"form-input"},null,8,Pt),[[D,s.value.address2]])]),t("div",bt,[t("label",kt,[A(r(e.$t("cart.checkout.form.city"))+" ",1),a[21]||(a[21]=t("span",{class:"text-red-500"},"*",-1))]),y(t("input",{type:"text",id:"city","onUpdate:modelValue":a[7]||(a[7]=o=>s.value.city=o),placeholder:e.$t("cart.checkout.form.placeholders.city"),class:"form-input",required:"",list:"colombia-cities"},null,8,St),[[D,s.value.city]]),a[22]||(a[22]=He('<datalist id="colombia-cities" data-v-fe2919e5><option value="MedellÃ­n" data-v-fe2919e5></option><option value="BogotÃ¡" data-v-fe2919e5></option><option value="Cali" data-v-fe2919e5></option><option value="Barranquilla" data-v-fe2919e5></option><option value="Cartagena" data-v-fe2919e5></option><option value="San AndrÃ©s Isla" data-v-fe2919e5></option><option value="Santa Catalina" data-v-fe2919e5></option><option value="Providencia" data-v-fe2919e5></option><option value="Bucaramanga" data-v-fe2919e5></option><option value="Pereira" data-v-fe2919e5></option><option value="Manizales" data-v-fe2919e5></option><option value="IbaguÃ©" data-v-fe2919e5></option><option value="Villavicencio" data-v-fe2919e5></option><option value="Pasto" data-v-fe2919e5></option><option value="Neiva" data-v-fe2919e5></option></datalist>',1)),s.value.city?(n(),l("p",Dt,[t("span",null,r(e.$t("cart.checkout.form.shippingCost",{cost:i(Q.value)})),1)])):h("",!0)]),t("div",$t,[t("div",It,[t("label",Et,[A(r(e.$t("cart.checkout.form.state"))+" ",1),a[23]||(a[23]=t("span",{class:"text-red-500"},"*",-1))]),y(t("select",{id:"state","onUpdate:modelValue":a[8]||(a[8]=o=>s.value.state=o),class:"form-input form-select",required:""},[t("option",At,r(e.$t("cart.checkout.form.placeholders.selectState")),1),(n(!0),l(F,null,K(Se.value,o=>(n(),l("option",{key:o.isoCode,value:o.name},r(o.name),9,Ut))),128))],512),[[ne,s.value.state]])]),t("div",Ot,[t("label",Nt,[A(r(e.$t("cart.checkout.form.zipCode"))+" ",1),a[24]||(a[24]=t("span",{class:"text-red-500"},"*",-1))]),y(t("input",{type:"text",id:"zipcode","onUpdate:modelValue":a[9]||(a[9]=o=>s.value.zipCode=o),placeholder:e.$t("cart.checkout.form.placeholders.zipCode"),class:"form-input",required:""},null,8,Tt),[[D,s.value.zipCode]])])]),t("div",Lt,[t("label",Wt,[A(r(e.$t("cart.checkout.form.phone"))+" ",1),a[25]||(a[25]=t("span",{class:"text-red-500"},"*",-1))]),t("div",Vt,[y(t("select",{"onUpdate:modelValue":a[10]||(a[10]=o=>s.value.phoneCode=o),class:"phone-code",disabled:""},[(n(),l(F,null,K(ke,o=>t("option",{key:o.code,value:o.dial_code},r(o.flag)+" "+r(o.dial_code),9,Ft)),64))],512),[[ne,s.value.phoneCode]]),y(t("input",{type:"tel",id:"phone","onUpdate:modelValue":a[11]||(a[11]=o=>s.value.phone=o),placeholder:e.$t("cart.checkout.form.placeholders.phone"),class:"form-input phone-number",required:""},null,8,Ht),[[D,s.value.phone]])])]),t("div",Rt,[t("label",Mt,r(e.$t("cart.checkout.form.additionalDetails")),1),y(t("textarea",{id:"additional","onUpdate:modelValue":a[12]||(a[12]=o=>s.value.additionalDetails=o),placeholder:e.$t("cart.checkout.form.placeholders.additionalDetails"),class:"form-textarea",rows:"3"},null,8,qt),[[D,s.value.additionalDetails]])])],64)):h("",!0),_.value==="gift"?(n(),l(F,{key:1},[t("div",Gt,[t("label",Yt,[A(r(e.$t("cart.checkout.form.recipientUsername"))+" ",1),a[26]||(a[26]=t("span",{class:"text-red-500"},"*",-1))]),t("div",zt,[y(t("input",{type:"text",id:"username","onUpdate:modelValue":a[13]||(a[13]=o=>T.value=o),placeholder:e.$t("cart.checkout.form.placeholders.searchUser"),class:"form-input username-search-input",autocomplete:"off",onFocus:a[14]||(a[14]=o=>V.value=H(g).searchResults.length>0),onBlur:Ee},null,40,Bt),[[D,T.value]]),V.value&&H(g).searchResults.length>0?(n(),l("div",Kt,[(n(!0),l(F,null,K(H(g).searchResults,o=>(n(),l("div",{key:o.id,class:"username-search-item",onMousedown:d=>me(o)},[t("img",{src:o.profile_picture||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=40",alt:o.username,class:"search-avatar"},null,8,jt),t("div",xt,[t("span",Qt,"@"+r(o.username),1),o.is_crush?(n(),l("span",Xt,"Crush")):h("",!0)])],40,Jt))),128))])):h("",!0)]),t("p",Zt,r(e.$t("cart.checkout.form.help.recipientUsername")),1)]),t("div",eo,[t("label",to,r($e.value),1),y(t("textarea",{id:"note","onUpdate:modelValue":a[15]||(a[15]=o=>s.value.note=o),placeholder:e.$t("cart.checkout.form.placeholders.giftNote"),class:"form-textarea",rows:"3"},null,8,oo),[[D,s.value.note]])])],64)):h("",!0),t("div",ao,[t("button",{onClick:Ue,disabled:!ae.value,class:"continue-payment-btn"},r(ae.value?H(v).currentCurrency==="COP"?e.$t("cart.checkout.form.buttons.payWithWompi"):e.$t("cart.checkout.form.buttons.continueToPay"):e.$t("cart.checkout.form.buttons.completeRequired")),9,so),E.value?(n(),l("p",ro,r(E.value),1)):h("",!0)]),ve.value&&se.value&&H(v).currentCurrency==="COP"?(n(),l("div",lo,[a[27]||(a[27]=t("h3",{class:"wompi-title"},"ðŸ’³ Completa tu pago",-1)),a[28]||(a[28]=t("p",{class:"wompi-description"},"Selecciona tu mÃ©todo de pago preferido",-1)),Re(Ze,{"widget-data":se.value,"render-mode":"button"},null,8,["widget-data"])])):h("",!0),ee.value&&H(v).currentCurrency==="USD"?(n(),l("div",no,[t("h3",io,r(e.$t("cart.checkout.form.paypal.title")),1),a[29]||(a[29]=t("div",{id:"paypal-button-container"},null,-1))])):h("",!0)])]),t("div",co,[t("div",uo,[t("h2",po,r(e.$t("cart.checkout.form.orderSummary")),1),H(S).isUpdating?(n(),l("div",mo,[t("p",null,r(e.$t("cart.checkout.form.loadingProducts")),1)])):(n(),l("div",vo,[(n(!0),l(F,null,K(De.value,o=>(n(),l("div",{key:o.id,class:"product-item"},[t("div",ho,[t("img",{src:o.image||"https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=200",alt:o.name||"Product"},null,8,fo)]),t("div",go,[t("h4",_o,r(o.name||"Product"),1),o.color?(n(),l("p",yo,r(e.$t("cart.checkout.form.color"))+": "+r(o.color),1)):h("",!0),o.size?(n(),l("p",wo,r(e.$t("cart.checkout.form.size"))+": "+r(o.size),1)):h("",!0),o.attributes&&Object.keys(o.attributes).length>0?(n(),l("p",Co,[(n(!0),l(F,null,K(o.attributes,(d,w)=>(n(),l("span",{key:w},r(w)+": "+r(d),1))),128))])):h("",!0),o.variation_id?(n(),l("p",Po,r(e.$t("cart.checkout.form.variation"))+": #"+r(o.variation_id),1)):h("",!0)]),t("div",bo,[t("span",null,r(o.quantity),1)]),t("div",ko,r(i(o.price*o.quantity)),1)]))),128))])),t("div",So,[t("h3",Do,r(e.$t("cart.checkout.form.discountCode")),1),c.value?h("",!0):(n(),l("div",$o,[y(t("input",{type:"text","onUpdate:modelValue":a[16]||(a[16]=o=>N.value=o),placeholder:e.$t("cart.checkout.form.placeholders.discountCode"),class:"form-input",disabled:z.value,onKeyup:Me(he,["enter"])},null,40,Io),[[D,N.value]]),t("button",{onClick:he,disabled:z.value||!N.value.trim(),class:"validate-btn"},r(z.value?e.$t("cart.checkout.form.buttons.validating"):e.$t("cart.checkout.form.buttons.validate")),9,Eo)])),c.value?(n(),l("div",Ao,[t("div",Uo,[t("span",Oo,r(c.value.code),1),t("span",No,"-"+r(c.value.discount_percentage)+"%",1)]),t("button",{onClick:Le,class:"remove-discount-btn",title:"Remover descuento"}," âœ• ")])):h("",!0),W.value&&!c.value?(n(),l("p",To,r(W.value),1)):h("",!0)]),t("div",Lo,[t("div",Wo,[t("span",null,r(e.$t("cart.checkout.form.subtotal")),1),t("div",Vo,[c.value?(n(),l("span",Fo,r(i(M.value)),1)):h("",!0),t("span",{class:qe(["total-value",{"discounted-subtotal":c.value}])},r(i(B.value)),3)])]),t("div",Ho,[t("span",null,r(e.$t("cart.checkout.form.shipping")),1),t("span",Ro,[A(r(i(Q.value))+" ",1),_.value==="gift"&&m.value?(n(),l("span",Mo," ("+r(m.value.username)+") ",1)):s.value.city?(n(),l("span",qo," ("+r(s.value.city)+") ",1)):h("",!0)])]),c.value?(n(),l("div",Go,[t("span",Yo,r(e.$t("cart.checkout.form.discountApplied",{code:c.value.code,percentage:c.value.discount_percentage})),1),t("span",zo,"-"+r(i(X.value)),1)])):h("",!0),t("div",Bo,[t("span",null,[A(r(e.$t("cart.checkout.form.tax"))+" ",1),t("span",Ko,r(e.$t("cart.checkout.form.taxIncludedBadge")),1)]),t("span",Jo,r(i(re.value)),1)])]),t("div",jo,[t("div",xo,[t("span",Qo,r(e.$t("cart.checkout.form.total")),1),t("span",Xo,r(i(G.value)),1)]),t("p",Zo,r(e.$t("cart.checkout.form.taxIncluded",{tax:i(re.value)})),1)])])])])]))}},da=Ce(ea,[["__scopeId","data-v-fe2919e5"]]);export{da as default};
