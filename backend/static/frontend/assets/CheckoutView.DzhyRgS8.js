import{N as Ie,u as Ae,r as m,l as k,E as X,o as Ne,m as Oe,O as Te,c as l,b as n,d as o,j as p,t as r,p as h,P as me,e as w,z as b,F as T,H as le,Q as Le,i as G,g as H,G as Ve,k as Re}from"./index.BcKINQe8.js";import{u as Fe}from"./cartStore.CHHw3CrP.js";import{u as He}from"./authStore.CsV1KDQ0.js";import{u as qe}from"./crushStore.CSmLLxz2.js";import{u as Ye}from"./paymentStore.BGQRVnbg.js";import{u as ze}from"./productStore.CD_yBNnh.js";import{u as Be}from"./useAlert.D8T0rvLa.js";import{C as Ge,S as Ke}from"./state.DRCieogr.js";import{_ as Me}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./constants.DjCFsGER.js";const We={class:"checkout-view"},Je={class:"checkout-container"},je={class:"shipping-section"},Qe={class:"shipping-card"},Xe={class:"section-title"},Ze={class:"shipping-type"},xe={class:"radio-label"},eo={class:"radio-label"},oo={class:"form-group"},ao={for:"email"},to=["placeholder"],so={key:0,class:"gift-field-description"},ro={class:"form-group"},lo={for:"fullname"},no=["placeholder"],co={class:"form-group"},io={for:"country"},uo={class:"form-group"},po={for:"address1"},vo=["placeholder"],mo={class:"form-group"},ho={for:"address2"},fo=["placeholder"],_o={class:"form-group"},go={for:"city"},yo=["placeholder"],Co={key:0,class:"city-shipping-info"},Po={class:"form-row"},ko={class:"form-group"},bo={for:"state"},So={value:""},wo=["value"],$o={class:"form-group"},Uo={for:"zipcode"},Do=["placeholder"],Eo={class:"form-group"},Io={for:"phone"},Ao={class:"phone-input"},No=["value"],Oo=["placeholder"],To={class:"form-group"},Lo={for:"additional"},Vo=["placeholder"],Ro={class:"form-group"},Fo={for:"username"},Ho={class:"username-search-container"},qo=["placeholder"],Yo={key:0,class:"username-search-results"},zo=["onMousedown"],Bo=["src","alt"],Go={class:"search-user-info"},Ko={class:"search-username"},Mo={key:0,class:"search-crush-label"},Wo={class:"gift-field-description"},Jo={class:"form-group"},jo={for:"note"},Qo=["placeholder"],Xo={class:"form-group payment-button-section"},Zo=["disabled"],xo={key:0,class:"payment-error"},ea={key:2,id:"paypal-section",class:"paypal-section"},oa={class:"paypal-title"},aa={class:"summary-section"},ta={class:"summary-card"},sa={class:"section-title"},ra={key:0,class:"loading-state"},la={key:1,class:"products-list"},na={class:"product-image"},ca=["src","alt"],ia={class:"product-details"},ua={class:"product-name"},da={key:0,class:"product-meta"},pa={key:1,class:"product-meta"},va={key:2,class:"product-meta"},ma={key:3,class:"product-meta variation-id"},ha={class:"product-quantity"},fa={class:"product-price"},_a={class:"discount-section"},ga={class:"discount-title"},ya={key:0,class:"discount-input"},Ca=["placeholder","disabled"],Pa=["disabled"],ka={key:1,class:"discount-applied"},ba={class:"discount-applied-content"},Sa={class:"discount-code-badge"},wa={class:"discount-percentage"},$a={key:2,class:"discount-error"},Ua={class:"totals-section"},Da={class:"total-row"},Ea={class:"subtotal-values"},Ia={key:0,class:"original-subtotal"},Aa={class:"total-row"},Na={class:"total-value"},Oa={key:0,class:"shipping-city-note"},Ta={key:1,class:"shipping-city-note"},La={key:0,class:"total-row discount-row"},Va={class:"discount-label"},Ra={class:"total-value discount-value"},Fa={class:"total-row tax-row"},Ha={class:"tax-included-badge"},qa={class:"total-value tax-included-value"},Ya={class:"final-total"},za={class:"total-row"},Ba={class:"total-label"},Ga={class:"total-amount"},Ka={class:"tax-note"},he=48500,Ma={__name:"CheckoutView",setup(Wa){const Z=Oe(),f=Ie(),$=e=>f.formatPrice(e),q=e=>f.currentCurrency==="USD"?Math.round(e/4e3*100)/100:e,U=Fe(),L=He(),y=qe(),K=Ae(),V=Ye(),fe=ze(),{showSuccess:ne,showError:P,showLoading:ce,closeAlert:M}=Be(),_e=Ge.getAllCountries().map(e=>({...e,flag:e.flag||"ðŸ³ï¸"})),ge=[{code:"CO",dial_code:"+57",flag:"ðŸ‡¨ðŸ‡´",name:"Colombia"}],v=m("me"),s=m({email:"",fullName:"",country:"CO",address1:"",address2:"",city:"",state:"",zipCode:"",phoneCode:"+57",phone:"",additionalDetails:"",username:"",note:""}),E=m(""),d=m(null),N=m(""),Y=m(!1),S=m(""),x=m(!1),ee=m(!1),D=m(null),ie=m(!1),I=m(""),O=m(!1),u=m(null);let A=null;const W=m(null),oe=m(null),ye=k(()=>Ke.getStatesOfCountry("CO")),Ce=k(()=>U.items),ue=k(()=>L.isLoggedIn&&L.username),Pe=k(()=>u.value&&u.value.username?K.locale==="es"?`Nota para @${u.value.username}`:`Note for @${u.value.username}`:K.locale==="es"?"Nota para el destinatario":"Note for recipient"),ke=async e=>{if(!e||!e.trim()){y.clearSearch();return}try{await y.searchUsers(e.trim(),5)}catch(t){console.error("Error searching users:",t)}},be=()=>{setTimeout(()=>{O.value=!1},200)},de=e=>{console.log("ðŸ‘¤ [SELECT USER] Usuario seleccionado:",e),u.value=e,O.value=!1,y.clearSearch(),A&&(clearTimeout(A),A=null),s.value.username=`@${e.username}`,I.value=`@${e.username}`,console.log("ðŸ’° [SELECT USER] Costo de envÃ­o del usuario:",e.shipping_cost)};X(I,e=>{if(s.value.username=e,A&&clearTimeout(A),!e.trim()){y.clearSearch(),O.value=!1,u.value=null;return}if(u.value&&e===`@${u.value.username}`){console.log("â­ï¸ [WATCH] Usuario ya seleccionado, no buscar de nuevo");return}A=setTimeout(async()=>{await ke(e),O.value=y.searchResults.length>0},300)}),X(v,e=>{e!=="gift"&&(I.value="",O.value=!1,u.value=null,y.clearSearch())}),X(()=>s.value.username,e=>{v.value==="gift"&&e!==I.value&&(I.value=e)});const Se=async()=>{ie.value=!0;try{console.log(`ðŸ“¦ [DROPSHIPPING] Consultando producto ${he}...`);const e=await fe.fetchWooProduct(he);e.success&&e.data?(D.value=e.data,console.log("âœ… [DROPSHIPPING] Producto cargado:",{id:e.data.id,name:e.data.name,price:e.data.price})):console.error("âŒ [DROPSHIPPING] Error al cargar producto:",e.error)}catch(e){console.error("âŒ [DROPSHIPPING] Error inesperado:",e)}finally{ie.value=!1}},z=k(()=>U.totalPrice),ae=k(()=>{if(v.value==="me"){const e=!!(s.value.email&&s.value.fullName&&s.value.address1&&s.value.city&&s.value.state&&s.value.zipCode&&s.value.phone);return e||console.log("ðŸ” [VALIDATION] Campos faltantes:",{email:!!s.value.email,fullName:!!s.value.fullName,address1:!!s.value.address1,city:!!s.value.city,state:!!s.value.state,zipCode:!!s.value.zipCode,phone:!!s.value.phone}),e}return v.value==="gift"?!!(s.value.email&&s.value.username):!1}),we=async()=>{var e,t,a,c,_,i,g;S.value="";try{if(console.log("ðŸ“¦ [CHECKOUT] Preparando datos para pago..."),!ae.value){S.value="Por favor completa todos los campos obligatorios",await P("Completa todos los campos obligatorios antes de continuar.","âš ï¸ Campos Incompletos");return}if(!U.items||U.items.length===0){S.value="El carrito estÃ¡ vacÃ­o",await P("Tu carrito estÃ¡ vacÃ­o.","ðŸ›’ Carrito VacÃ­o");return}const Q=_e.find(C=>C.isoCode===s.value.country),ve=Q?Q.name:s.value.country,re=U.items.map(C=>({woocommerce_product_id:C.product_id||C.id,woocommerce_variation_id:C.variation_id||null,product_name:C.name,quantity:C.quantity,unit_price:f.currentCurrency==="USD"?parseFloat(parseFloat(C.price).toFixed(2)):parseFloat(C.price),attributes:C.attributes||null}));D.value&&(re.push({woocommerce_product_id:D.value.id,woocommerce_variation_id:null,product_name:D.value.name,quantity:1,unit_price:f.currentCurrency==="USD"?parseFloat(parseFloat(D.value.price).toFixed(2)):parseFloat(D.value.price),attributes:null}),console.log("ðŸ“¦ [DROPSHIPPING] Producto agregado a items"));let F;v.value==="gift"?(F={items:re,customer_email:s.value.email,customer_name:ue.value?`${((e=L.user)==null?void 0:e.first_name)||""} ${((t=L.user)==null?void 0:t.last_name)||""}`.trim()||L.username:s.value.email,receiver_username:s.value.username.replace("@",""),gift_message:s.value.note||"",is_gift:!0,shipping:f.currentCurrency==="USD"?parseFloat(R.value.toFixed(2)):R.value,total:f.currentCurrency==="USD"?parseFloat(B.value.toFixed(2)):B.value,is_from_wishlist:!!W.value,wishlist_id:W.value||null,wishlist_name:oe.value||null,shipping_address:((a=u.value)==null?void 0:a.address)||"DirecciÃ³n del destinatario",shipping_city:((c=u.value)==null?void 0:c.city)||"Ciudad",shipping_state:((_=u.value)==null?void 0:_.state)||"Departamento",shipping_postal_code:((i=u.value)==null?void 0:i.postal_code)||"00000",shipping_country:ve,phone_number:((g=u.value)==null?void 0:g.phone)||"+57 300 0000000"},ue.value&&(F.sender_username=L.username)):F={items:re,customer_email:s.value.email,customer_name:s.value.fullName,shipping_address:s.value.address1,shipping_address_line_2:s.value.address2||"",shipping_city:s.value.city,shipping_state:s.value.state,shipping_postal_code:s.value.zipCode,shipping_country:ve,phone_number:`${s.value.phoneCode} ${s.value.phone}`,notes:s.value.additionalDetails||"",shipping:f.currentCurrency==="USD"?parseFloat(R.value.toFixed(2)):R.value,total:f.currentCurrency==="USD"?parseFloat(B.value.toFixed(2)):B.value},console.log("ðŸ“¤ [CHECKOUT] Datos de orden preparados:",F),f.currentCurrency==="COP"?await $e(F):(sessionStorage.setItem("checkout_order_data",JSON.stringify(F)),x.value=!0,setTimeout(()=>{const C=document.getElementById("paypal-section");C&&C.scrollIntoView({behavior:"smooth",block:"center"})},100))}catch(Q){console.error("âŒ [CHECKOUT] Error al preparar datos:",Q),S.value="Error al preparar la orden",await P("Error al preparar la orden.","âŒ Error")}},$e=async e=>{try{ce("Creando transacciÃ³n...","ðŸ’³ Wompi"),console.log("ðŸ’³ [WOMPI] Iniciando pago...",e);const t=await V.createWompiTransaction(e);if(M(),!t.success){S.value=t.error||"Error al crear transacciÃ³n en Wompi",await P(S.value,"âŒ Error en Wompi");return}console.log("âœ… [WOMPI] TransacciÃ³n creada:",t.data),localStorage.setItem("wompi_transaction_id",t.data.transaction_id),localStorage.setItem("wompi_order_data",JSON.stringify(e)),window.location.href=t.data.payment_url}catch(t){M(),console.error("âŒ [WOMPI] Error inesperado:",t),S.value="Error al procesar el pago con Wompi",await P(S.value,"âŒ Error")}},Ue=async()=>new Promise(async(e,t)=>{if(window.paypal){console.log("ðŸ’³ [PAYPAL] SDK ya estÃ¡ cargado"),ee.value=!0,e();return}const a=document.querySelector('script[src*="paypal.com/sdk/js"]');if(a){a.addEventListener("load",()=>{console.log("ðŸ’³ [PAYPAL] SDK cargado desde script existente"),ee.value=!0,e()});return}console.log("ðŸ’³ [PAYPAL] Cargando SDK...");const c="AXOC4gQsXk_e8NhrrZRorJzU3rld7lOJP5_2S8RYDKUgjkDT-2wfc-1Eu1AqYQseWTcJA_VBEnGUUGCQ",_=f.currentCurrency;console.log("ðŸ’³ [PAYPAL] Client ID:",c),console.log("ðŸ’³ [PAYPAL] Currency:",_);const i=document.createElement("script");i.src=`https://www.paypal.com/sdk/js?client-id=${c}&buyer-country=US&currency=${_}&components=buttons&enable-funding=venmo,paylater,card`,i.setAttribute("data-sdk-integration-source","developer-studio"),i.onload=()=>{console.log("âœ… [PAYPAL] SDK cargado exitosamente"),ee.value=!0,e()},i.onerror=g=>{console.error("âŒ [PAYPAL] Error al cargar SDK:",g),t(g)},document.head.appendChild(i)}),De=()=>{if(!window.paypal){console.error("âŒ [PAYPAL] SDK no estÃ¡ disponible");return}const e=document.getElementById("paypal-button-container");if(!e){console.error("âŒ [PAYPAL] Contenedor no encontrado");return}e.innerHTML="";const t=sessionStorage.getItem("checkout_order_data");if(!t){console.error("âŒ [PAYPAL] No hay datos de orden");return}const a=JSON.parse(t);window.paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal"},createOrder:async(c,_)=>{console.log("ðŸ’³ [PAYPAL] Creando orden...");try{if(a.is_gift){const g=await V.sendGift(a);if(!g.success)throw new Error(g.error);return g.paypal_order_id}const i=await V.createPayPalOrder(a);if(!i.success)throw new Error(i.error);return i.paypal_order_id}catch(i){throw console.error("âŒ [PAYPAL] Error al crear orden:",i),await P(i.message||"Error al crear orden","âŒ Error"),i}},onApprove:async(c,_)=>{console.log("âœ… [PAYPAL] Pago aprobado");try{ce("Procesando tu pago...","ðŸ’³ Procesando");const i={paypal_order_id:c.orderID,...a},g=await V.capturePayPalOrder(c.orderID,i);if(M(),!g.success)throw new Error(g.error);console.log("âœ… [PAYPAL] Pago procesado exitosamente"),await ne(`Tu orden ha sido creada exitosamente.

ðŸ“‹ Orden: ${g.order.order_number}
ðŸ’° Total: $${g.order.total}

RecibirÃ¡s un email de confirmaciÃ³n pronto.`,"ðŸŽ‰ Â¡Pago Exitoso!",{timer:8e3}),sessionStorage.removeItem("checkout_order_data"),U.clearCart(),V.clearPaymentState(),setTimeout(()=>{Z.push({name:`Home-${K.locale}`})},1e3)}catch(i){console.error("âŒ [PAYPAL] Error al capturar pago:",i),M(),await P(i.message||"Error al procesar el pago","âŒ Error")}},onCancel:c=>{console.log("âš ï¸ [PAYPAL] Pago cancelado"),P("Has cancelado el proceso de pago.","âš ï¸ Pago Cancelado",{timer:5e3})},onError:c=>{console.error("âŒ [PAYPAL] Error:",c),P("Hubo un error con PayPal. Por favor intenta de nuevo.","âŒ Error en PayPal")}}).render("#paypal-button-container")},pe=async()=>{var e,t;if(!E.value||!E.value.trim()){N.value="Por favor ingresa un cÃ³digo de descuento";return}Y.value=!0,N.value="";try{console.log("ðŸŽŸï¸ [DISCOUNT] Validando cÃ³digo:",E.value);const a=await V.validateDiscountCode(E.value.trim().toUpperCase());console.log("ðŸŽŸï¸ [DISCOUNT] Respuesta:",a),a.success&&a.data.exists&&a.data.is_valid?(d.value={code:a.data.code,discount_percentage:parseFloat(a.data.discount_percentage)},await ne(`Â¡CÃ³digo aplicado! Descuento del ${a.data.discount_percentage}%`,"ðŸŽ‰ Descuento Aplicado"),console.log("âœ… [DISCOUNT] Descuento aplicado:",d.value)):(d.value=null,N.value=((e=a.data)==null?void 0:e.message)||a.error||"CÃ³digo de descuento no vÃ¡lido",await P(((t=a.data)==null?void 0:t.message)||a.error||"El cÃ³digo ingresado no es vÃ¡lido o ha expirado","âŒ CÃ³digo InvÃ¡lido"))}catch(a){console.error("âŒ [DISCOUNT] Error al validar:",a),d.value=null,N.value="Error al validar el cÃ³digo",await P("Hubo un error al validar el cÃ³digo. Por favor intenta de nuevo.","âŒ Error")}finally{Y.value=!1}},Ee=()=>{d.value=null,E.value="",N.value="",console.log("ðŸ—‘ï¸ [DISCOUNT] Descuento removido")},R=k(()=>{if(v.value==="gift"&&u.value&&u.value.shipping_cost){const t=parseFloat(u.value.shipping_cost),a=q(t);return console.log(`ðŸ“¦ [SHIPPING] Costo del usuario destinatario: ${t} COP â†’ ${a} ${f.currentCurrency}`),a}const e=(s.value.city||"").toLowerCase().trim();if(!e)return q(15e3);switch(e){case"medellÃ­n":case"medellin":return q(10500);case"san andrÃ©s isla":case"san andres isla":case"san andrÃ©s":case"san andres":case"santa catalina":case"providencia":return q(45e3);default:return q(15e3)}}),J=k(()=>{let e=R.value;if(D.value&&D.value.price){const t=parseFloat(D.value.price);e+=t,console.log(`ðŸ“¦ [DROPSHIPPING] Shipping mostrado: ${R.value} + ${t} = ${e}`)}return e}),te=k(()=>j.value*(.19/1.19)),se=k(()=>{if(!d.value)return 0;const e=z.value*d.value.discount_percentage/100;return console.log("ðŸŽŸï¸ [DISCOUNT] Monto calculado:",{subtotal:z.value,percentage:d.value.discount_percentage,discount:e}),e}),j=k(()=>z.value-se.value),B=k(()=>{const e=j.value+J.value;return console.log("ðŸ’° [TOTAL] CÃ¡lculo:",{subtotal:z.value,discount:se.value,subtotal_after_discount:j.value,shipping:J.value,tax_included:te.value,total:e}),e});return Ne(async()=>{if(U.loadCart(),U.isEmpty){Z.push({name:`Cart-${K.locale}`});return}const e=Z.currentRoute.value;if(e.query.giftMode==="true"){if(v.value="gift",e.query.username){const t=e.query.username,a=t.startsWith("@")?t:`@${t}`;s.value.username=a,I.value=a;try{const c=t.replace("@","").trim();if(console.log("ðŸ” [CHECKOUT] Buscando usuario automÃ¡ticamente:",c),await y.searchUsers(c,5),y.searchResults.length>0){const _=y.searchResults.find(i=>i.username.toLowerCase()===c.toLowerCase());_?(console.log("âœ… [CHECKOUT] Usuario encontrado automÃ¡ticamente:",_),de(_)):console.warn("âš ï¸ [CHECKOUT] No se encontrÃ³ coincidencia exacta para:",c)}else console.warn("âš ï¸ [CHECKOUT] No se encontraron resultados para:",c)}catch(c){console.error("âŒ [CHECKOUT] Error al buscar usuario automÃ¡ticamente:",c)}}e.query.wishlistId&&(W.value=parseInt(e.query.wishlistId),oe.value=e.query.wishlistName||null,console.log("ðŸŽ [WISHLIST] Compra desde wishlist:",{id:W.value,name:oe.value}))}await Se()}),X(x,async e=>{if(e&&f.currentCurrency==="USD")try{await Ue(),setTimeout(()=>{De()},100)}catch(t){console.error("âŒ [PAYPAL] Error al inicializar:",t),await P("No se pudo cargar PayPal.","âŒ Error")}}),Te(()=>{A&&clearTimeout(A),u.value=null,y.clearSearch()}),(e,t)=>(n(),l("div",We,[o("div",Je,[o("div",je,[o("div",Qe,[o("h2",Xe,r(e.$t("cart.checkout.shippingInformation")),1),o("div",Ze,[o("label",xe,[h(o("input",{type:"radio",name:"shipping-type",value:"me","onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),checked:""},null,512),[[me,v.value]]),o("span",null,r(e.$t("cart.checkout.shippingType.forMe")),1)]),o("label",eo,[h(o("input",{type:"radio",name:"shipping-type",value:"gift","onUpdate:modelValue":t[1]||(t[1]=a=>v.value=a)},null,512),[[me,v.value]]),o("span",null,r(e.$t("cart.checkout.shippingType.forGift")),1)])]),o("div",oo,[o("label",ao,[w(r(v.value==="gift"?e.$t("cart.checkout.form.emailGift"):e.$t("cart.checkout.form.email"))+" ",1),t[17]||(t[17]=o("span",{class:"text-red-500"},"*",-1))]),h(o("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.email=a),placeholder:v.value==="gift"?e.$t("cart.checkout.form.placeholders.emailGift"):e.$t("cart.checkout.form.placeholders.email"),class:"form-input",required:""},null,8,to),[[b,s.value.email]]),v.value==="gift"?(n(),l("p",so,r(e.$t("cart.checkout.form.help.emailGift")),1)):p("",!0)]),v.value==="me"?(n(),l(T,{key:0},[o("div",ro,[o("label",lo,[w(r(e.$t("cart.checkout.form.fullName"))+" ",1),t[18]||(t[18]=o("span",{class:"text-red-500"},"*",-1))]),h(o("input",{type:"text",id:"fullname","onUpdate:modelValue":t[3]||(t[3]=a=>s.value.fullName=a),placeholder:e.$t("cart.checkout.form.placeholders.fullName"),class:"form-input",required:""},null,8,no),[[b,s.value.fullName]])]),o("div",co,[o("label",io,r(e.$t("cart.checkout.form.country")),1),h(o("select",{id:"country","onUpdate:modelValue":t[4]||(t[4]=a=>s.value.country=a),class:"form-input form-select",disabled:""},[...t[19]||(t[19]=[o("option",{value:"CO"},"ðŸ‡¨ðŸ‡´ Colombia",-1)])],512),[[le,s.value.country]])]),o("div",uo,[o("label",po,[w(r(e.$t("cart.checkout.form.address1"))+" ",1),t[20]||(t[20]=o("span",{class:"text-red-500"},"*",-1))]),h(o("input",{type:"text",id:"address1","onUpdate:modelValue":t[5]||(t[5]=a=>s.value.address1=a),placeholder:e.$t("cart.checkout.form.placeholders.address1"),class:"form-input",required:""},null,8,vo),[[b,s.value.address1]])]),o("div",mo,[o("label",ho,r(e.$t("cart.checkout.form.address2")),1),h(o("input",{type:"text",id:"address2","onUpdate:modelValue":t[6]||(t[6]=a=>s.value.address2=a),placeholder:e.$t("cart.checkout.form.placeholders.address2"),class:"form-input"},null,8,fo),[[b,s.value.address2]])]),o("div",_o,[o("label",go,[w(r(e.$t("cart.checkout.form.city"))+" ",1),t[21]||(t[21]=o("span",{class:"text-red-500"},"*",-1))]),h(o("input",{type:"text",id:"city","onUpdate:modelValue":t[7]||(t[7]=a=>s.value.city=a),placeholder:e.$t("cart.checkout.form.placeholders.city"),class:"form-input",required:"",list:"colombia-cities"},null,8,yo),[[b,s.value.city]]),t[22]||(t[22]=Le('<datalist id="colombia-cities" data-v-c075eca4><option value="MedellÃ­n" data-v-c075eca4></option><option value="BogotÃ¡" data-v-c075eca4></option><option value="Cali" data-v-c075eca4></option><option value="Barranquilla" data-v-c075eca4></option><option value="Cartagena" data-v-c075eca4></option><option value="San AndrÃ©s Isla" data-v-c075eca4></option><option value="Santa Catalina" data-v-c075eca4></option><option value="Providencia" data-v-c075eca4></option><option value="Bucaramanga" data-v-c075eca4></option><option value="Pereira" data-v-c075eca4></option><option value="Manizales" data-v-c075eca4></option><option value="IbaguÃ©" data-v-c075eca4></option><option value="Villavicencio" data-v-c075eca4></option><option value="Pasto" data-v-c075eca4></option><option value="Neiva" data-v-c075eca4></option></datalist>',1)),s.value.city?(n(),l("p",Co,[o("span",null,r(e.$t("cart.checkout.form.shippingCost",{cost:$(J.value)})),1)])):p("",!0)]),o("div",Po,[o("div",ko,[o("label",bo,[w(r(e.$t("cart.checkout.form.state"))+" ",1),t[23]||(t[23]=o("span",{class:"text-red-500"},"*",-1))]),h(o("select",{id:"state","onUpdate:modelValue":t[8]||(t[8]=a=>s.value.state=a),class:"form-input form-select",required:""},[o("option",So,r(e.$t("cart.checkout.form.placeholders.selectState")),1),(n(!0),l(T,null,G(ye.value,a=>(n(),l("option",{key:a.isoCode,value:a.name},r(a.name),9,wo))),128))],512),[[le,s.value.state]])]),o("div",$o,[o("label",Uo,[w(r(e.$t("cart.checkout.form.zipCode"))+" ",1),t[24]||(t[24]=o("span",{class:"text-red-500"},"*",-1))]),h(o("input",{type:"text",id:"zipcode","onUpdate:modelValue":t[9]||(t[9]=a=>s.value.zipCode=a),placeholder:e.$t("cart.checkout.form.placeholders.zipCode"),class:"form-input",required:""},null,8,Do),[[b,s.value.zipCode]])])]),o("div",Eo,[o("label",Io,[w(r(e.$t("cart.checkout.form.phone"))+" ",1),t[25]||(t[25]=o("span",{class:"text-red-500"},"*",-1))]),o("div",Ao,[h(o("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>s.value.phoneCode=a),class:"phone-code",disabled:""},[(n(),l(T,null,G(ge,a=>o("option",{key:a.code,value:a.dial_code},r(a.flag)+" "+r(a.dial_code),9,No)),64))],512),[[le,s.value.phoneCode]]),h(o("input",{type:"tel",id:"phone","onUpdate:modelValue":t[11]||(t[11]=a=>s.value.phone=a),placeholder:e.$t("cart.checkout.form.placeholders.phone"),class:"form-input phone-number",required:""},null,8,Oo),[[b,s.value.phone]])])]),o("div",To,[o("label",Lo,r(e.$t("cart.checkout.form.additionalDetails")),1),h(o("textarea",{id:"additional","onUpdate:modelValue":t[12]||(t[12]=a=>s.value.additionalDetails=a),placeholder:e.$t("cart.checkout.form.placeholders.additionalDetails"),class:"form-textarea",rows:"3"},null,8,Vo),[[b,s.value.additionalDetails]])])],64)):p("",!0),v.value==="gift"?(n(),l(T,{key:1},[o("div",Ro,[o("label",Fo,[w(r(e.$t("cart.checkout.form.recipientUsername"))+" ",1),t[26]||(t[26]=o("span",{class:"text-red-500"},"*",-1))]),o("div",Ho,[h(o("input",{type:"text",id:"username","onUpdate:modelValue":t[13]||(t[13]=a=>I.value=a),placeholder:e.$t("cart.checkout.form.placeholders.searchUser"),class:"form-input username-search-input",autocomplete:"off",onFocus:t[14]||(t[14]=a=>O.value=H(y).searchResults.length>0),onBlur:be},null,40,qo),[[b,I.value]]),O.value&&H(y).searchResults.length>0?(n(),l("div",Yo,[(n(!0),l(T,null,G(H(y).searchResults,a=>(n(),l("div",{key:a.id,class:"username-search-item",onMousedown:c=>de(a)},[o("img",{src:a.profile_picture||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=40",alt:a.username,class:"search-avatar"},null,8,Bo),o("div",Go,[o("span",Ko,"@"+r(a.username),1),a.is_crush?(n(),l("span",Mo,"Crush")):p("",!0)])],40,zo))),128))])):p("",!0)]),o("p",Wo,r(e.$t("cart.checkout.form.help.recipientUsername")),1)]),o("div",Jo,[o("label",jo,r(Pe.value),1),h(o("textarea",{id:"note","onUpdate:modelValue":t[15]||(t[15]=a=>s.value.note=a),placeholder:e.$t("cart.checkout.form.placeholders.giftNote"),class:"form-textarea",rows:"3"},null,8,Qo),[[b,s.value.note]])])],64)):p("",!0),o("div",Xo,[o("button",{onClick:we,disabled:!ae.value,class:"continue-payment-btn"},r(ae.value?H(f).currentCurrency==="COP"?e.$t("cart.checkout.form.buttons.payWithWompi"):e.$t("cart.checkout.form.buttons.continueToPay"):e.$t("cart.checkout.form.buttons.completeRequired")),9,Zo),S.value?(n(),l("p",xo,r(S.value),1)):p("",!0)]),x.value&&H(f).currentCurrency==="USD"?(n(),l("div",ea,[o("h3",oa,r(e.$t("cart.checkout.form.paypal.title")),1),t[27]||(t[27]=o("div",{id:"paypal-button-container"},null,-1))])):p("",!0)])]),o("div",aa,[o("div",ta,[o("h2",sa,r(e.$t("cart.checkout.form.orderSummary")),1),H(U).isUpdating?(n(),l("div",ra,[o("p",null,r(e.$t("cart.checkout.form.loadingProducts")),1)])):(n(),l("div",la,[(n(!0),l(T,null,G(Ce.value,a=>(n(),l("div",{key:a.id,class:"product-item"},[o("div",na,[o("img",{src:a.image||"https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=200",alt:a.name||"Product"},null,8,ca)]),o("div",ia,[o("h4",ua,r(a.name||"Product"),1),a.color?(n(),l("p",da,r(e.$t("cart.checkout.form.color"))+": "+r(a.color),1)):p("",!0),a.size?(n(),l("p",pa,r(e.$t("cart.checkout.form.size"))+": "+r(a.size),1)):p("",!0),a.attributes&&Object.keys(a.attributes).length>0?(n(),l("p",va,[(n(!0),l(T,null,G(a.attributes,(c,_)=>(n(),l("span",{key:_},r(_)+": "+r(c),1))),128))])):p("",!0),a.variation_id?(n(),l("p",ma,r(e.$t("cart.checkout.form.variation"))+": #"+r(a.variation_id),1)):p("",!0)]),o("div",ha,[o("span",null,r(a.quantity),1)]),o("div",fa,r($(a.price*a.quantity)),1)]))),128))])),o("div",_a,[o("h3",ga,r(e.$t("cart.checkout.form.discountCode")),1),d.value?p("",!0):(n(),l("div",ya,[h(o("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=a=>E.value=a),placeholder:e.$t("cart.checkout.form.placeholders.discountCode"),class:"form-input",disabled:Y.value,onKeyup:Ve(pe,["enter"])},null,40,Ca),[[b,E.value]]),o("button",{onClick:pe,disabled:Y.value||!E.value.trim(),class:"validate-btn"},r(Y.value?e.$t("cart.checkout.form.buttons.validating"):e.$t("cart.checkout.form.buttons.validate")),9,Pa)])),d.value?(n(),l("div",ka,[o("div",ba,[o("span",Sa,r(d.value.code),1),o("span",wa,"-"+r(d.value.discount_percentage)+"%",1)]),o("button",{onClick:Ee,class:"remove-discount-btn",title:"Remover descuento"}," âœ• ")])):p("",!0),N.value&&!d.value?(n(),l("p",$a,r(N.value),1)):p("",!0)]),o("div",Ua,[o("div",Da,[o("span",null,r(e.$t("cart.checkout.form.subtotal")),1),o("div",Ea,[d.value?(n(),l("span",Ia,r($(z.value)),1)):p("",!0),o("span",{class:Re(["total-value",{"discounted-subtotal":d.value}])},r($(j.value)),3)])]),o("div",Aa,[o("span",null,r(e.$t("cart.checkout.form.shipping")),1),o("span",Na,[w(r($(J.value))+" ",1),v.value==="gift"&&u.value?(n(),l("span",Oa," ("+r(u.value.username)+") ",1)):s.value.city?(n(),l("span",Ta," ("+r(s.value.city)+") ",1)):p("",!0)])]),d.value?(n(),l("div",La,[o("span",Va,r(e.$t("cart.checkout.form.discountApplied",{code:d.value.code,percentage:d.value.discount_percentage})),1),o("span",Ra,"-"+r($(se.value)),1)])):p("",!0),o("div",Fa,[o("span",null,[w(r(e.$t("cart.checkout.form.tax"))+" ",1),o("span",Ha,r(e.$t("cart.checkout.form.taxIncludedBadge")),1)]),o("span",qa,r($(te.value)),1)])]),o("div",Ya,[o("div",za,[o("span",Ba,r(e.$t("cart.checkout.form.total")),1),o("span",Ga,r($(B.value)),1)]),o("p",Ka,r(e.$t("cart.checkout.form.taxIncluded",{tax:$(te.value)})),1)])])])])]))}},st=Me(Ma,[["__scopeId","data-v-c075eca4"]]);export{st as default};
