import{u as E,p as Y,r as m,i as q,j as O,c as l,o as r,a as t,h as p,t as i,e as h,b as W,s as j,v as y,x as C,F as T,g as U,d as Q,z as G,k as J,n as K,m as X}from"../index.js";import{u as Z}from"./wishlistStore-2Sa37WF2.js";import{P as ee}from"./ProductCard-CQu7feZr.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as se}from"./ClipboardDocumentListIcon-B64Bqp8n.js";import"./constants-DjCFsGER.js";import"./cartStore-VCuiRpOe.js";import"./authStore-tY-7-Xic.js";import"./profileStore-DZizYbaJ.js";const oe={class:"py-4 md:py-6"},ie={class:"px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto"},re={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"},le={class:"text-2xl md:text-3xl font-bold text-gray-900"},ne={key:0,class:"text-xs md:text-sm text-gray-600 mt-1"},ae={class:"flex flex-wrap items-center gap-2 md:gap-3"},de={class:"hidden sm:inline"},ue={class:"hidden sm:inline"},ce=["disabled"],me={class:"mb-4 md:mb-6"},pe=["placeholder"],he=["disabled"],be={key:0,class:"flex justify-center py-12"},fe={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},ve={class:"text-sm text-red-800"},xe={key:2,class:"space-y-3 md:space-y-4"},ge={class:"p-4 md:p-6"},ke={class:"flex flex-col md:flex-row md:items-start md:justify-between gap-3"},ye={class:"flex-1"},we={class:"text-base md:text-lg font-semibold text-gray-900 mb-1"},_e={class:"text-xs md:text-sm text-gray-600 mb-2"},$e={class:"text-xs text-gray-500"},We={key:0},Ce={key:1},Pe={class:"flex flex-wrap items-center gap-2"},Me=["onClick","disabled"],Be={class:"hidden sm:inline"},je=["onClick"],Te=["onClick"],Ue={key:0,class:"px-4 md:px-6 pb-4 md:pb-6"},Se={key:0,class:"flex justify-center py-6 md:py-8"},Ne={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},Ve=["onClick","title"],Fe={key:2,class:"mt-2"},He={class:"text-xs text-gray-600 italic"},ze={key:2,class:"text-sm text-gray-500 text-center py-8"},De={key:3,class:"text-center py-12"},Le={class:"mt-4 text-lg font-medium text-gray-900"},Ae={class:"mt-2 text-sm text-gray-500"},Ie={class:"bg-white rounded-xl md:rounded-2xl p-5 md:p-6 max-w-md w-full"},Re={class:"text-lg md:text-xl font-bold text-gray-900 mb-4"},Ee={class:"space-y-4"},Ye={class:"block text-sm font-medium text-gray-700 mb-1"},qe=["placeholder"],Oe={class:"block text-sm font-medium text-gray-700 mb-1"},Qe=["placeholder"],Ge={class:"flex items-center"},Je={for:"is_public",class:"ml-2 text-sm text-gray-700"},Ke={class:"flex gap-3 mt-6"},Xe=["disabled"],Ze={__name:"ProfileWishlist",setup(et){const w=J(),n=Z(),_=E(),{t:S}=Y(),b=m(""),f=m([]),v=m(!1),g=m(null),$=m(null),x=m({}),u=m({name:"",description:"",is_public:!1}),a=m(null),k=m([]),P=q(()=>a.value?k.value:n.wishlists),N=async e=>{const s=f.value.indexOf(e);if(s>-1)f.value.splice(s,1);else if(f.value.push(e),!x.value[e]){$.value=e;try{let o;a.value?o=await n.fetchPublicWishlistByUsername(a.value.username,e):o=await n.fetchWishlist(e),o.success&&(x.value[e]=o.data)}catch(o){console.error("Error loading wishlist details:",o)}finally{$.value=null}}},M=e=>{const s=x.value[e];if(s&&s.items)return s.items;const o=n.wishlists.find(d=>d.id===e);return(o==null?void 0:o.items)||[]},V=e=>{var s,o;return{id:e.woocommerce_product_id,name:e.product_name,price:e.product_price,images:((s=e.product_info)==null?void 0:s.images)||[{src:e.product_image}],stock_status:((o=e.product_info)==null?void 0:o.stock_status)||"instock",...e.product_info}},F=e=>{w.push({name:`ProductDetail-${_.locale}`,params:{id:e}})},H=e=>{console.log("Product added to cart from wishlist:",e)},z=async()=>{(await n.createWishlist(u.value)).success&&(v.value=!1,u.value={name:"",description:"",is_public:!1})},D=async e=>{if(e.public_url)try{await navigator.clipboard.writeText(e.public_url),g.value=e.id,setTimeout(()=>g.value=null,2e3)}catch(s){console.error("Failed to copy:",s)}},L=e=>{var o,d;const s=((o=a.value)==null?void 0:o.username)||((d=authStore.user)==null?void 0:d.username);if(!s){console.error("No username available for wishlist purchase");return}w.push({name:`Checkout-${_.locale}`,query:{giftMode:"true",username:s,wishlistId:e.id,wishlistName:e.name}}),console.log("🎁 Navigating to checkout for wishlist:",e.name)},A=async(e,s)=>{if(!confirm(S("profile.wishlist.confirmRemove")))return;if((await n.removeWooCommerceProductFromWishlist(e,s)).success){const d=await n.fetchWishlist(e);d.success&&(x.value[e]=d.data)}},B=()=>{w.push({name:`Products-${_.locale}`})},I=async()=>{if(!b.value.trim())return;let e=b.value.trim();if(e.startsWith("@")&&(e=e.substring(1)),!e)return;const s=await n.fetchWishlistsByUsername(e);s.success&&(a.value=s.user,k.value=s.data,k.value=s.data.map(o=>({id:o.id,name:o.title||o.name,description:o.description,total_items:o.items_count||o.total_items||0,total_value:o.total_value||0,is_public:!0,public_url:o.public_url,shareable_path:o.shareable_path,created_at:o.created_at,user_username:e})))},R=async()=>{b.value="",a.value=null,k.value=[],f.value=[],x.value={},await n.fetchWishlists()};return O(async()=>{await n.fetchWishlists()}),(e,s)=>(r(),l("div",oe,[t("div",ie,[t("div",re,[t("div",null,[t("h1",le,i(a.value?`@${a.value.username}${e.$t("profile.wishlist.usersWishlists")}`:e.$t("profile.wishlist.myWishlists")),1),a.value?(r(),l("p",ne,i(a.value.fullName)+" · "+i(a.value.totalWishlists)+" "+i(a.value.totalWishlists!==1?e.$t("profile.wishlist.publicWishlistsPlural"):e.$t("profile.wishlist.publicWishlists")),1)):p("",!0)]),t("div",ae,[a.value?(r(),l("button",{key:0,onClick:R,class:"flex items-center gap-2 px-3 md:px-4 py-2 border-2 border-gray-400 text-gray-700 bg-white rounded-full text-xs md:text-sm font-medium hover:bg-gray-100 transition-colors"},[s[8]||(s[8]=t("svg",{class:"w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),t("span",de,i(e.$t("profile.wishlist.backToMyWishlists")),1)])):p("",!0),t("button",{onClick:B,class:"flex items-center gap-2 px-3 md:px-4 py-2 border-2 border-brand-pink-medium text-brand-pink-medium bg-white rounded-full text-xs md:text-sm font-medium hover:bg-brand-pink-medium hover:text-white transition-colors"},[s[9]||(s[9]=t("svg",{class:"w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)),t("span",ue,i(e.$t("profile.wishlist.goToShop")),1)]),a.value?p("",!0):(r(),l("button",{key:1,onClick:s[0]||(s[0]=o=>v.value=!0),disabled:h(n).isUpdating,class:"flex items-center gap-2 px-3 md:px-4 py-2 border-2 border-brand-pink-medium text-brand-pink-medium bg-white rounded-full text-xs md:text-sm font-medium hover:bg-brand-pink-medium hover:text-white transition-colors disabled:opacity-50"},[s[10]||(s[10]=t("svg",{class:"w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),W(" "+i(e.$t("profile.wishlist.create")),1)],8,ce))])]),t("div",me,[t("form",{onSubmit:j(I,["prevent"]),class:"relative max-w-md"},[s[11]||(s[11]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),y(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>b.value=o),type:"text",placeholder:e.$t("profile.wishlist.searchPlaceholder"),class:"block w-full pl-10 pr-20 py-2.5 border border-gray-300 rounded-lg bg-white placeholder-gray-500 focus:ring-2 focus:ring-brand-pink-medium focus:border-transparent text-sm"},null,8,pe),[[C,b.value]]),t("button",{type:"submit",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-brand-pink-medium hover:text-brand-pink-dark font-medium text-sm",disabled:!b.value.trim()},i(e.$t("profile.wishlist.search")),9,he)],32)]),h(n).isLoading?(r(),l("div",be,[...s[12]||(s[12]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-pink-medium"},null,-1)])])):h(n).error?(r(),l("div",fe,[t("p",ve,i(h(n).error),1)])):P.value.length>0?(r(),l("div",xe,[(r(!0),l(T,null,U(P.value,o=>{var d;return r(),l("div",{key:o.id,class:"wishlist-card border-2 border-gray-900 rounded-xl md:rounded-2xl overflow-hidden"},[t("div",ge,[t("div",ke,[t("div",ye,[t("h3",we,i(o.name),1),t("p",_e,i(o.description||e.$t("profile.wishlist.noDescription")),1),t("p",$e,[W(i(o.total_items)+" "+i(e.$t("profile.wishlist.items"))+" · $"+i(((d=o.total_value)==null?void 0:d.toFixed(2))||"0.00")+" · ",1),o.is_public?(r(),l("span",We,i(e.$t("profile.wishlist.public")),1)):(r(),l("span",Ce,i(e.$t("profile.wishlist.private")),1))])]),t("div",Pe,[o.is_public?(r(),l("button",{key:0,onClick:c=>D(o),disabled:g.value===o.id,class:"flex items-center gap-1.5 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 border-2 border-brand-pink-medium text-brand-pink-medium bg-white rounded-full text-xs font-medium hover:bg-brand-pink-medium hover:text-white transition-colors whitespace-nowrap disabled:opacity-50"},[s[13]||(s[13]=t("svg",{class:"w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),t("span",Be,i(g.value===o.id?e.$t("profile.wishlist.copied"):e.$t("profile.wishlist.copyWishlistLink")),1)],8,Me)):p("",!0),t("button",{onClick:c=>L(o),class:"px-3 md:px-4 py-1.5 md:py-2 border-2 border-brand-pink-medium text-brand-pink-medium bg-white rounded-full text-xs font-medium hover:bg-brand-pink-medium hover:text-white transition-colors whitespace-nowrap"},i(a.value?e.$t("profile.wishlist.buyWishlist"):e.$t("profile.wishlist.buyMyWishlist")),9,je),t("button",{onClick:c=>N(o.id),class:"p-2 hover:bg-gray-100 rounded-full transition-colors"},[(r(),l("svg",{class:K(["w-5 h-5 text-gray-600 transition-transform",{"rotate-180":f.value.includes(o.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[14]||(s[14]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,Te)])])]),f.value.includes(o.id)?(r(),l("div",Ue,[$.value===o.id?(r(),l("div",Se,[...s[15]||(s[15]=[t("div",{class:"animate-spin rounded-full h-8 w-8 md:h-10 md:w-10 border-b-2 border-brand-pink-medium"},null,-1)])])):M(o.id).length>0?(r(),l("div",Ne,[(r(!0),l(T,null,U(M(o.id),c=>(r(),l("div",{key:c.id,class:"relative"},[a.value?p("",!0):(r(),l("button",{key:0,onClick:tt=>A(o.id,c.woocommerce_product_id),class:"absolute top-2 right-2 z-10 bg-white hover:bg-red-600 text-gray-600 hover:text-white rounded-full p-1.5 shadow-md transition-colors",title:e.$t("profile.wishlist.removeFromWishlist")},[...s[16]||(s[16]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ve)),c.product_info?(r(),X(ee,{key:1,product:V(c),onNavigateToProduct:F,onAddToCart:H},null,8,["product"])):p("",!0),c.notes?(r(),l("div",Fe,[t("p",He,"💭 "+i(c.notes),1)])):p("",!0)]))),128))])):(r(),l("div",ze,[s[17]||(s[17]=t("svg",{class:"w-16 h-16 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),t("p",null,i(e.$t("profile.wishlist.noProductsYet")),1),t("button",{onClick:B,class:"mt-3 text-brand-pink-medium hover:text-brand-pink-dark font-medium text-sm"},i(e.$t("profile.wishlist.browseProducts")),1)]))])):p("",!0)])}),128))])):(r(),l("div",De,[Q(h(se),{class:"mx-auto h-16 w-16 text-gray-400"}),t("h3",Le,i(e.$t("profile.wishlist.noWishlistsYet")),1),t("p",Ae,i(e.$t("profile.wishlist.createFirstWishlist")),1),t("button",{onClick:s[2]||(s[2]=o=>v.value=!0),class:"mt-4 inline-flex items-center gap-2 px-4 py-2 border-2 border-brand-pink-medium text-brand-pink-medium bg-white rounded-full text-sm font-medium hover:bg-brand-pink-medium hover:text-white transition-colors"},[s[18]||(s[18]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),W(" "+i(e.$t("profile.wishlist.createWishlist")),1)])]))]),v.value?(r(),l("div",{key:0,class:"fixed inset-0 bg-white/40 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:s[7]||(s[7]=j(o=>v.value=!1,["self"]))},[t("div",Ie,[t("h2",Re,i(e.$t("profile.wishlist.createWishlistTitle")),1),t("div",Ee,[t("div",null,[t("label",Ye,i(e.$t("profile.wishlist.name")),1),y(t("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>u.value.name=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-pink-medium focus:border-transparent",placeholder:e.$t("profile.wishlist.namePlaceholder")},null,8,qe),[[C,u.value.name]])]),t("div",null,[t("label",Oe,i(e.$t("profile.wishlist.description")),1),y(t("textarea",{"onUpdate:modelValue":s[4]||(s[4]=o=>u.value.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-pink-medium focus:border-transparent",placeholder:e.$t("profile.wishlist.descriptionPlaceholder")},null,8,Qe),[[C,u.value.description]])]),t("div",Ge,[y(t("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>u.value.is_public=o),type:"checkbox",id:"is_public",class:"h-4 w-4 text-brand-pink-medium focus:ring-brand-pink-medium border-gray-300 rounded"},null,512),[[G,u.value.is_public]]),t("label",Je,i(e.$t("profile.wishlist.makePublic")),1)])]),t("div",Ke,[t("button",{onClick:s[6]||(s[6]=o=>v.value=!1),class:"flex-1 px-4 py-2 border-2 border-gray-300 text-gray-700 bg-white rounded-lg hover:bg-gray-100 transition-colors"},i(e.$t("profile.wishlist.cancel")),1),t("button",{onClick:z,disabled:!u.value.name||h(n).isUpdating,class:"flex-1 px-4 py-2 border-2 border-brand-pink-medium text-brand-pink-medium bg-white rounded-lg hover:bg-brand-pink-medium hover:text-white transition-colors disabled:opacity-50"},i(h(n).isUpdating?e.$t("profile.wishlist.creating"):e.$t("profile.wishlist.create")),9,Xe)])])])):p("",!0)]))}},ct=te(Ze,[["__scopeId","data-v-cabe9e3d"]]);export{ct as default};
