import{u as D,r as P,l as F,c as a,b as t,d as e,n as L,k as I,Q as W,t as l,j as b,F as k,i as w,e as B,q as A,C as N,m as S,o as E,y as K,E as V,p as U,z as q,g as $,s as H,f as C}from"../index.js";import{u as M}from"./crushStore-yx15gHN1.js";import{N as Y,F as O}from"./Footer-BlMTS6Me.js";import{P as J}from"./ProductCard-BlrwzTCL.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./cartStore-CDfjOPb9.js";import"./transition-xy9MWKGA.js";import"./authStore-DVIAn0uN.js";import"./constants-DjCFsGER.js";import"./profileStore-B4Vmm1K_.js";import"./wishlistStore-BRMRVyY4.js";const Q={class:"public-profile"},G={class:"profile-header"},X={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Z={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ee={class:"share-text"},se={class:"avatar-container"},oe=["src","alt"],te={class:"profile-content"},ae={class:"profile-info"},re={class:"profile-username"},ie={class:"biography-section"},le={class:"section-title"},ne={class:"biography-text"},ce={class:"three-column-grid"},de={class:"links-section"},ue={class:"section-title"},he={class:"links-buttons"},pe=["href"],me={class:"info-card"},ge={class:"section-title"},_e={class:"info-text"},ve={class:"info-card"},fe={class:"section-title"},ye={class:"info-text"},be={key:0,class:"gallery-section"},ke={class:"section-title"},we={class:"gallery-grid"},$e=["src","alt"],xe={key:1,class:"wishlists-section"},Ce={class:"section-title"},Pe={class:"space-y-4"},Se={class:"p-6"},Te={class:"flex items-center justify-between gap-3 mb-2"},Ie={class:"text-lg font-semibold text-gray-900 flex-shrink-0"},De={class:"flex items-center gap-2 ml-auto"},Fe=["onClick"],Me=["onClick"],Le=["onClick"],Be={class:"text-sm text-gray-600 mb-2"},Ne={class:"text-xs text-gray-500"},Ee={key:0,class:"px-6 pb-6"},Ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={key:1,class:"mt-2"},Re={class:"text-xs text-gray-600 italic"},ze={key:1,class:"text-sm text-gray-500 text-center py-8"},We={__name:"PublicProfile",props:{profileData:{type:Object,default:()=>({avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",coverImage:null,name:"Mary Jackson",username:"@username",biography:`Hi! I'm [Your Name], a friendly, upbeat webcam model who loves good conversation, cozy vibes, and a touch of playful energy. On my shows you'll find smiles, laughter, and a welcoming space where we can relax, chat, and enjoy the moment together. I'm into [interests: gaming/fitness/cosplay/music], so don't be shy about asking questions or sharing what you love too.

I value respect and positive energy. Please be polite, keep requests within platform rules, and remember I don't do meetups—everything stays online and between consenting adults (18+). Tips and requests help me create more content and upgrade my setup, and I'm always grateful for your support.

Schedule: [Days/Times] ([Timezone]).
What to expect: friendly chats, playful banter, themed outfits, and interactive goals.
Support: follows, tips, and kind words mean the world—thank you!
Hit follow, turn on notifications, and say hi when you join. Let's make great memories together. 💫`,links:[{label:"Instagram",color:"#C77DFF"},{label:"Facebook",color:"#C77DFF"},{label:"Stream",color:"#C77DFF"}],state:"Sweet smiles, playful vibes—come say hi ✨",notes:"Welcome to my room! This is a respectful, 18+ space. I don't do meetups or off-platform chats, and I follow site rules. Tips and kind words keep the show going and help upgrade my setup. Custom requests? Ask first and be polite. Schedule: [Days/Times, Timezone]. Thanks for being sweet and supportive! 💫",gallery:["https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400","https://images.unsplash.com/photo-1488716820095-cbe80883c496?w=400","https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400","https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400","https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400","https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400","https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400","https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=400","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400","https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400"],wishlists:[],items:[]})}},setup(x){const v=S(),u=N(),g=D(),p=P([]),h=P(!1),f=x,r=F(()=>f.profileData||{}),n=o=>o?Number(o).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",s=o=>{const i=p.value.indexOf(o);i>-1?p.value.splice(i,1):p.value.push(o)},c=o=>{var i,d;return{id:o.woocommerce_product_id,name:o.product_name,price:o.product_price,images:((i=o.product_info)==null?void 0:i.images)||[{src:o.product_image}],stock_status:((d=o.product_info)==null?void 0:d.stock_status)||"instock",...o.product_info}},_=o=>{v.push({name:`ProductDetail-${g.locale}`,params:{id:o}})},y=o=>{console.log("Product added to cart from wishlist:",o)},j=async()=>{try{const o=window.location.href;await navigator.clipboard.writeText(o),h.value=!0,console.log("✅ Link copiado al portapapeles:",o),setTimeout(()=>{h.value=!1},2e3)}catch(o){console.error("❌ Error copiando link:",o);try{const i=document.createElement("textarea");i.value=window.location.href,i.style.position="fixed",i.style.left="-999999px",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch(i){console.error("❌ Fallback también falló:",i)}}},R=o=>{var d;const i=((d=r.value.username)==null?void 0:d.replace("@",""))||u.params.username;v.push({name:`Checkout-${g.locale}`,query:{giftMode:"true",username:i,wishlistId:o.id,wishlistName:o.name}}),console.log("🎁 Navigating to checkout for wishlist:",o.name)},z=async o=>{try{const i=o.public_url||`${window.location.origin}${o.shareable_path}`;await navigator.clipboard.writeText(i),console.log("✅ Wishlist link copied:",i),alert("Wishlist link copied to clipboard!")}catch(i){console.error("❌ Error copying wishlist link:",i)}};return(o,i)=>(t(),a("div",Q,[e("div",G,[e("div",{class:I(["header-gradient",{"has-cover":r.value.coverImage}]),style:L(r.value.coverImage?{backgroundImage:`url(${r.value.coverImage})`}:{})},null,6),e("button",{class:I(["share-button",{copied:h.value}]),onClick:j},[h.value?(t(),a("svg",Z,[...i[1]||(i[1]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(t(),a("svg",X,[...i[0]||(i[0]=[W('<circle cx="18" cy="5" r="3" data-v-561ffc2c></circle><circle cx="6" cy="12" r="3" data-v-561ffc2c></circle><circle cx="18" cy="19" r="3" data-v-561ffc2c></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" data-v-561ffc2c></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" data-v-561ffc2c></line>',5)])])),e("span",ee,l(h.value?o.$t("diaries.publicProfile.linkCopied"):o.$t("diaries.publicProfile.share")),1)],2),e("div",se,[e("img",{src:r.value.avatar,alt:r.value.name,class:"avatar-image"},null,8,oe)])]),e("div",te,[e("div",ae,[e("h1",re,l(r.value.username),1)]),e("div",ie,[e("h3",le,l(o.$t("diaries.publicProfile.biography")),1),e("div",ne,l(r.value.biography),1)]),e("div",ce,[e("div",de,[e("h3",ue,l(o.$t("diaries.publicProfile.myLinks")),1),e("div",he,[(t(!0),a(k,null,w(r.value.links,(d,m)=>(t(),a("a",{key:m,href:d.url,target:"_blank",rel:"noopener noreferrer",class:"link-button",style:L({backgroundColor:d.color||"#C77DFF"})},l(d.label),13,pe))),128))])]),e("div",me,[e("h3",ge,l(o.$t("diaries.publicProfile.myState")),1),e("p",_e,l(r.value.state),1)]),e("div",ve,[e("h3",fe,l(o.$t("diaries.publicProfile.notes")),1),e("p",ye,l(r.value.notes),1)])]),r.value.gallery&&r.value.gallery.length>0?(t(),a("div",be,[e("h3",ke,l(o.$t("diaries.publicProfile.gallery")),1),e("div",we,[(t(!0),a(k,null,w(r.value.gallery,(d,m)=>(t(),a("div",{key:m,class:"gallery-item"},[e("img",{src:d,alt:`${o.$t("diaries.publicProfile.galleryImageAlt")} ${m+1}`,class:"gallery-image"},null,8,$e)]))),128))])])):b("",!0),r.value.wishlists&&r.value.wishlists.length>0?(t(),a("div",xe,[e("h3",Ce,l(o.$t("diaries.publicProfile.wishlists")),1),e("div",Pe,[(t(!0),a(k,null,w(r.value.wishlists,d=>(t(),a("div",{key:d.id,class:"wishlist-card border-2 border-gray-900 rounded-2xl overflow-hidden"},[e("div",Se,[e("div",Te,[e("h3",Ie,l(d.name),1),e("div",De,[e("button",{onClick:m=>z(d),class:"wishlist-action-btn copy-btn"},[...i[2]||(i[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),B(" Copy wishlist link ",-1)])],8,Fe),e("button",{onClick:m=>R(d),class:"wishlist-action-btn buy-btn"}," Buy my wishlist ",8,Me),e("button",{onClick:m=>s(d.id),class:"p-2 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0"},[(t(),a("svg",{class:I(["w-5 h-5 text-gray-600 transition-transform",{"rotate-180":p.value.includes(d.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...i[3]||(i[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,Le)])]),e("div",null,[e("p",Be,l(d.description||o.$t("diaries.publicProfile.noDescription")),1),e("p",Ne,l(d.total_items)+" "+l(o.$t("diaries.publicProfile.wishlistItems"))+" · $"+l(n(d.total_value)),1)])]),p.value.includes(d.id)?(t(),a("div",Ee,[d.items&&d.items.length>0?(t(),a("div",Ve,[(t(!0),a(k,null,w(d.items,m=>(t(),a("div",{key:m.id,class:"relative"},[m.product_info?(t(),A(J,{key:0,product:c(m),"gift-mode":!0,onNavigateToProduct:_,onAddToCart:y},null,8,["product"])):b("",!0),m.notes?(t(),a("div",je,[e("p",Re,"💭 "+l(m.notes),1)])):b("",!0)]))),128))])):(t(),a("div",ze,[i[4]||(i[4]=e("svg",{class:"w-16 h-16 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",null,l(o.$t("diaries.publicProfile.noProductsYet")),1)]))])):b("",!0)]))),128))])])):b("",!0)])]))}},Ae=T(We,[["__scopeId","data-v-561ffc2c"]]),Ke={class:"you-may-know"},Ue={class:"component-title"},qe={key:0,class:"loading-state"},He={class:"loading-text"},Ye={key:1,class:"error-state"},Oe={class:"error-text"},Je={key:2,class:"empty-state"},Qe={class:"empty-text"},Ge={key:3,class:"users-list"},Xe=["onClick"],Ze={class:"user-avatar"},es=["src","alt"],ss={class:"user-info"},os={class:"user-name"},ts=["onClick"],as={__name:"YouMayKnow",setup(x){const v=S(),u=M(),g=D(),p=P(!1),h=P(null),f=F(()=>u.crushList.slice(0,5));E(async()=>{if(u.crushList.length>0){console.log("✅ Crushes ya cargados, usando caché");return}p.value=!0,h.value=null;try{await u.fetchCrushList(5,0),console.log("✅ Crushes loaded in YouMayKnow")}catch(n){console.error("❌ Error loading crushes:",n),h.value=n.message||"Error al cargar crushes"}finally{p.value=!1}});const r=n=>{console.log("🔍 Navegando al perfil de crush:",n);const s=g.locale;v.push(`/${s}/diaries/@${n}`),window.scrollTo({top:0,behavior:"smooth"})};return(n,s)=>(t(),a("div",Ke,[e("h2",Ue,l(n.$t("diaries.youMayKnow.title")),1),p.value?(t(),a("div",qe,[s[0]||(s[0]=e("div",{class:"loading-spinner"},null,-1)),e("p",He,l(n.$t("diaries.youMayKnow.loading")),1)])):h.value?(t(),a("div",Ye,[e("p",Oe,l(h.value),1)])):f.value.length===0?(t(),a("div",Je,[e("p",Qe,l(n.$t("diaries.youMayKnow.noCrushes")),1)])):(t(),a("div",Ge,[(t(!0),a(k,null,w(f.value,c=>(t(),a("div",{key:c.id,class:"user-item",onClick:_=>r(c.username)},[e("div",Ze,[e("img",{src:c.profile_picture_url||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200",alt:c.username,class:"avatar-img"},null,8,es)]),e("div",ss,[e("h3",os,"@"+l(c.username),1),s[1]||(s[1]=e("p",{class:"user-description"},[e("span",{class:"crush-dot"}),e("span",{class:"crush-text"},"Crush")],-1))]),e("button",{class:"watch-button",onClick:K(_=>r(c.username),["stop"])},l(n.$t("diaries.youMayKnow.viewProfile")),9,ts)],8,Xe))),128))]))]))}},rs=T(as,[["__scopeId","data-v-7c82d9d5"]]),is={class:"user-search"},ls={class:"search-container"},ns=["placeholder"],cs={key:0,class:"loading-state"},ds={class:"loading-text"},us={key:1,class:"empty-state"},hs={class:"empty-text"},ps={key:2,class:"empty-state"},ms={class:"empty-text"},gs={key:3,class:"users-list"},_s=["onClick"],vs={class:"user-avatar"},fs=["src","alt"],ys={class:"user-info"},bs={class:"username-container"},ks={class:"username"},ws={key:0,class:"crush-label"},$s={__name:"UserSearch",setup(x){const v=S(),u=M(),g=D(),p=P("");let h=null;V(p,r=>{if(h&&clearTimeout(h),!r.trim()){u.clearSearch();return}h=setTimeout(async()=>{try{await u.searchUsers(r.trim(),10)}catch(n){console.error("Error searching users:",n)}},300)});const f=r=>{console.log("🔍 Navegando al perfil de:",r),p.value="",u.clearSearch();const n=g.locale;v.push(`/${n}/diaries/@${r}`),window.scrollTo({top:0,behavior:"smooth"})};return(r,n)=>(t(),a("div",is,[e("div",ls,[n[1]||(n[1]=e("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM18 18l-4.35-4.35",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),U(e("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>p.value=s),type:"text",placeholder:r.$t("diaries.userSearch.placeholder"),class:"search-input"},null,8,ns),[[q,p.value]])]),$(u).isSearching?(t(),a("div",cs,[n[2]||(n[2]=e("div",{class:"loading-spinner"},null,-1)),e("p",ds,l(r.$t("diaries.userSearch.searching")),1)])):p.value.trim()?$(u).searchResults.length===0?(t(),a("div",ps,[n[4]||(n[4]=e("svg",{class:"empty-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),e("p",ms,l(r.$t("diaries.userSearch.noResults")),1)])):(t(),a("div",gs,[(t(!0),a(k,null,w($(u).searchResults,s=>(t(),a("div",{key:s.id,class:"user-item",onClick:c=>f(s.username)},[e("div",vs,[e("img",{src:s.profile_picture_url||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200",alt:s.username,class:"avatar-img"},null,8,fs)]),e("div",ys,[e("div",bs,[e("span",ks,"@"+l(s.username),1),s.is_crush?(t(),a("span",ws,[...n[5]||(n[5]=[e("span",{class:"crush-dot"},null,-1),B(" Crush ",-1)])])):b("",!0)])])],8,_s))),128))])):(t(),a("div",us,[n[3]||(n[3]=e("svg",{class:"empty-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})],-1)),e("p",hs,l(r.$t("diaries.userSearch.startTyping")),1)]))]))}},xs=T($s,[["__scopeId","data-v-783e9db0"]]),Cs={class:"diaries-view"},Ps={class:"min-h-screen bg-brand-pink-lighter pt-20 md:pt-28 lg:pt-32 pb-12 md:pb-16"},Ss={class:"container mx-auto px-4 md:px-6 lg:px-4"},Ts={key:0,class:"loading-container"},Is={class:"loading-text"},Ds={key:1,class:"error-container"},Fs={class:"error-text"},Ms={key:2,class:"diaries-grid"},Ls={class:"profile-column"},Bs={class:"other-columns"},Ns={__name:"DiariesView",props:{username:{type:String,default:null}},setup(x){const v=x,u=M(),g=N(),p=S(),{t:h}=H(),f=F(()=>{var c,_;const s=u.crushProfile||u.randomCrush;return s?{avatar:s.profile_picture_url||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",coverImage:s.cover_image_url||null,name:s.username,username:`@${s.username}`,biography:s.about||h("diaries.publicProfile.defaultBiography"),links:((c=s.links)==null?void 0:c.map(y=>({label:y.title||y.platform,color:"#C77DFF",url:y.url})))||[],state:s.current_status||"Online",notes:s.note||"",gallery:((_=s.gallery_photos)==null?void 0:_.map(y=>y.image))||[],wishlists:s.public_wishlists||[]}:null});async function r(){const s=v.username||g.params.username;if(s)try{await u.fetchPublicProfile(s),console.log(`✅ Perfil de @${s} cargado en DiariesView`)}catch(c){console.error(`❌ Error cargando perfil de @${s}:`,c)}else try{const c=await u.fetchRandomCrush();if(console.log("✅ Crush aleatorio cargado en DiariesView"),c&&c.username){const _=g.path.split("/")[1]||"en";p.replace(`/${_}/diaries/@${c.username}`),console.log(`🔗 URL actualizada a: /${_}/diaries/@${c.username}`)}}catch(c){console.error("❌ Error cargando crush aleatorio:",c)}}async function n(){try{await u.fetchRandomCrush(),console.log("✅ Crush aleatorio cargado en DiariesView")}catch(s){console.error("❌ Error cargando crush aleatorio:",s)}}return V(()=>g.params.username,(s,c)=>{s&&s!==c&&r()}),E(()=>{r()}),(s,c)=>(t(),a("div",Cs,[C(Y),e("main",Ps,[e("div",Ss,[$(u).isLoading?(t(),a("div",Ts,[c[0]||(c[0]=e("div",{class:"loading-spinner"},null,-1)),e("p",Is,l(s.$t("diaries.publicProfile.loading")),1)])):$(u).error?(t(),a("div",Ds,[e("p",Fs,l($(u).error),1),e("button",{onClick:n,class:"retry-button"},l(s.$t("diaries.publicProfile.retry")),1)])):(t(),a("div",Ms,[e("div",Ls,[C(Ae,{"profile-data":f.value},null,8,["profile-data"])]),e("div",Bs,[C(xs),C(rs)])]))])]),C(O)]))}},Ys=T(Ns,[["__scopeId","data-v-09ec9f80"]]);export{Ys as default};
