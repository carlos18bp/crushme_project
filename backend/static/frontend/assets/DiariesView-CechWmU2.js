import{u as D,r as P,i as M,c as a,o as t,a as e,l as L,n as I,O as z,t as l,h as b,F as k,g as w,b as B,m as A,B as N,k as S,j as E,s as K,D as V,v as U,x as q,e as $,p as H,d as C}from"../index.js";import{u as F}from"./crushStore-CDiYl-yT.js";import{N as O,F as Y}from"./Footer-C_I2_Hif.js";import{P as J}from"./ProductCard-C1-pDTjR.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./cartStore-VCuiRpOe.js";import"./transition-iPTSRwE7.js";import"./authStore-tY-7-Xic.js";import"./constants-DjCFsGER.js";import"./profileStore-DZizYbaJ.js";import"./wishlistStore-2Sa37WF2.js";const G={class:"public-profile"},Q={class:"profile-header"},X={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Z={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ee={class:"share-text"},se={class:"avatar-container"},oe=["src","alt"],te={class:"profile-content"},ae={class:"profile-info"},re={class:"profile-username"},ie={class:"biography-section"},le={class:"section-title"},ne={class:"biography-text"},ce={class:"three-column-grid"},de={class:"links-section"},ue={class:"section-title"},he={class:"links-buttons"},pe=["onClick"],me={class:"info-card"},ge={class:"section-title"},_e={class:"info-text"},ve={class:"info-card"},ye={class:"section-title"},fe={class:"info-text"},be={key:0,class:"gallery-section"},ke={class:"section-title"},we={class:"gallery-grid"},$e=["src","alt"],xe={key:1,class:"wishlists-section"},Ce={class:"section-title"},Pe={class:"space-y-4"},Se={class:"p-6"},Te={class:"flex items-center justify-between gap-3 mb-2"},Ie={class:"text-lg font-semibold text-gray-900 flex-shrink-0"},De={class:"flex items-center gap-2 ml-auto"},Me=["onClick"],Fe=["onClick"],Le=["onClick"],Be={class:"text-sm text-gray-600 mb-2"},Ne={class:"text-xs text-gray-500"},Ee={key:0,class:"px-6 pb-6"},Ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={key:1,class:"mt-2"},Re={class:"text-xs text-gray-600 italic"},We={key:1,class:"text-sm text-gray-500 text-center py-8"},ze={__name:"PublicProfile",props:{profileData:{type:Object,default:()=>({avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",coverImage:null,name:"Mary Jackson",username:"@username",biography:`Hi! I'm [Your Name], a friendly, upbeat webcam model who loves good conversation, cozy vibes, and a touch of playful energy. On my shows you'll find smiles, laughter, and a welcoming space where we can relax, chat, and enjoy the moment together. I'm into [interests: gaming/fitness/cosplay/music], so don't be shy about asking questions or sharing what you love too.

I value respect and positive energy. Please be polite, keep requests within platform rules, and remember I don't do meetups—everything stays online and between consenting adults (18+). Tips and requests help me create more content and upgrade my setup, and I'm always grateful for your support.

Schedule: [Days/Times] ([Timezone]).
What to expect: friendly chats, playful banter, themed outfits, and interactive goals.
Support: follows, tips, and kind words mean the world—thank you!
Hit follow, turn on notifications, and say hi when you join. Let's make great memories together. 💫`,links:[{label:"Instagram",color:"#C77DFF"},{label:"Facebook",color:"#C77DFF"},{label:"Stream",color:"#C77DFF"}],state:"Sweet smiles, playful vibes—come say hi ✨",notes:"Welcome to my room! This is a respectful, 18+ space. I don't do meetups or off-platform chats, and I follow site rules. Tips and kind words keep the show going and help upgrade my setup. Custom requests? Ask first and be polite. Schedule: [Days/Times, Timezone]. Thanks for being sweet and supportive! 💫",gallery:["https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400","https://images.unsplash.com/photo-1488716820095-cbe80883c496?w=400","https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400","https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400","https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400","https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400","https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400","https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=400","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400","https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400"],wishlists:[],items:[]})}},setup(x){const v=S(),u=N(),g=D(),p=P([]),h=P(!1),y=x,r=M(()=>y.profileData||{}),n=s=>s?Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",o=s=>{const i=p.value.indexOf(s);i>-1?p.value.splice(i,1):p.value.push(s)},c=s=>{var i,d;return{id:s.woocommerce_product_id,name:s.product_name,price:s.product_price,images:((i=s.product_info)==null?void 0:i.images)||[{src:s.product_image}],stock_status:((d=s.product_info)==null?void 0:d.stock_status)||"instock",...s.product_info}},_=s=>{v.push({name:`ProductDetail-${g.locale}`,params:{id:s}})},f=s=>{console.log("Product added to cart from wishlist:",s)},j=async()=>{try{const s=window.location.href;await navigator.clipboard.writeText(s),h.value=!0,console.log("✅ Link copiado al portapapeles:",s),setTimeout(()=>{h.value=!1},2e3)}catch(s){console.error("❌ Error copiando link:",s);try{const i=document.createElement("textarea");i.value=window.location.href,i.style.position="fixed",i.style.left="-999999px",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch(i){console.error("❌ Fallback también falló:",i)}}},R=s=>{var d;const i=((d=r.value.username)==null?void 0:d.replace("@",""))||u.params.username;v.push({name:`Checkout-${g.locale}`,query:{giftMode:"true",username:i,wishlistId:s.id,wishlistName:s.name}}),console.log("🎁 Navigating to checkout for wishlist:",s.name)},W=async s=>{try{const i=s.public_url||`${window.location.origin}${s.shareable_path}`;await navigator.clipboard.writeText(i),console.log("✅ Wishlist link copied:",i),alert("Wishlist link copied to clipboard!")}catch(i){console.error("❌ Error copying wishlist link:",i)}};return(s,i)=>(t(),a("div",G,[e("div",Q,[e("div",{class:I(["header-gradient",{"has-cover":r.value.coverImage}]),style:L(r.value.coverImage?{backgroundImage:`url(${r.value.coverImage})`}:{})},null,6),e("button",{class:I(["share-button",{copied:h.value}]),onClick:j},[h.value?(t(),a("svg",Z,[...i[1]||(i[1]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(t(),a("svg",X,[...i[0]||(i[0]=[z('<circle cx="18" cy="5" r="3" data-v-bcceaf39></circle><circle cx="6" cy="12" r="3" data-v-bcceaf39></circle><circle cx="18" cy="19" r="3" data-v-bcceaf39></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" data-v-bcceaf39></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" data-v-bcceaf39></line>',5)])])),e("span",ee,l(h.value?s.$t("diaries.publicProfile.linkCopied"):s.$t("diaries.publicProfile.share")),1)],2),e("div",se,[e("img",{src:r.value.avatar,alt:r.value.name,class:"avatar-image"},null,8,oe)])]),e("div",te,[e("div",ae,[e("h1",re,l(r.value.username),1)]),e("div",ie,[e("h3",le,l(s.$t("diaries.publicProfile.biography")),1),e("div",ne,l(r.value.biography),1)]),e("div",ce,[e("div",de,[e("h3",ue,l(s.$t("diaries.publicProfile.myLinks")),1),e("div",he,[(t(!0),a(k,null,w(r.value.links,(d,m)=>(t(),a("button",{key:m,class:"link-button",style:L({backgroundColor:d.color}),onClick:Es=>d.url&&s.window.open(d.url,"_blank")},l(d.label),13,pe))),128))])]),e("div",me,[e("h3",ge,l(s.$t("diaries.publicProfile.myState")),1),e("p",_e,l(r.value.state),1)]),e("div",ve,[e("h3",ye,l(s.$t("diaries.publicProfile.notes")),1),e("p",fe,l(r.value.notes),1)])]),r.value.gallery&&r.value.gallery.length>0?(t(),a("div",be,[e("h3",ke,l(s.$t("diaries.publicProfile.gallery")),1),e("div",we,[(t(!0),a(k,null,w(r.value.gallery,(d,m)=>(t(),a("div",{key:m,class:"gallery-item"},[e("img",{src:d,alt:`${s.$t("diaries.publicProfile.galleryImageAlt")} ${m+1}`,class:"gallery-image"},null,8,$e)]))),128))])])):b("",!0),r.value.wishlists&&r.value.wishlists.length>0?(t(),a("div",xe,[e("h3",Ce,l(s.$t("diaries.publicProfile.wishlists")),1),e("div",Pe,[(t(!0),a(k,null,w(r.value.wishlists,d=>(t(),a("div",{key:d.id,class:"wishlist-card border-2 border-gray-900 rounded-2xl overflow-hidden"},[e("div",Se,[e("div",Te,[e("h3",Ie,l(d.name),1),e("div",De,[e("button",{onClick:m=>W(d),class:"wishlist-action-btn copy-btn"},[...i[2]||(i[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),B(" Copy wishlist link ",-1)])],8,Me),e("button",{onClick:m=>R(d),class:"wishlist-action-btn buy-btn"}," Buy my wishlist ",8,Fe),e("button",{onClick:m=>o(d.id),class:"p-2 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0"},[(t(),a("svg",{class:I(["w-5 h-5 text-gray-600 transition-transform",{"rotate-180":p.value.includes(d.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...i[3]||(i[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,Le)])]),e("div",null,[e("p",Be,l(d.description||s.$t("diaries.publicProfile.noDescription")),1),e("p",Ne,l(d.total_items)+" "+l(s.$t("diaries.publicProfile.wishlistItems"))+" · $"+l(n(d.total_value)),1)])]),p.value.includes(d.id)?(t(),a("div",Ee,[d.items&&d.items.length>0?(t(),a("div",Ve,[(t(!0),a(k,null,w(d.items,m=>(t(),a("div",{key:m.id,class:"relative"},[m.product_info?(t(),A(J,{key:0,product:c(m),"gift-mode":!0,onNavigateToProduct:_,onAddToCart:f},null,8,["product"])):b("",!0),m.notes?(t(),a("div",je,[e("p",Re,"💭 "+l(m.notes),1)])):b("",!0)]))),128))])):(t(),a("div",We,[i[4]||(i[4]=e("svg",{class:"w-16 h-16 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",null,l(s.$t("diaries.publicProfile.noProductsYet")),1)]))])):b("",!0)]))),128))])])):b("",!0)])]))}},Ae=T(ze,[["__scopeId","data-v-bcceaf39"]]),Ke={class:"you-may-know"},Ue={class:"component-title"},qe={key:0,class:"loading-state"},He={class:"loading-text"},Oe={key:1,class:"error-state"},Ye={class:"error-text"},Je={key:2,class:"empty-state"},Ge={class:"empty-text"},Qe={key:3,class:"users-list"},Xe=["onClick"],Ze={class:"user-avatar"},es=["src","alt"],ss={class:"user-info"},os={class:"user-name"},ts=["onClick"],as={__name:"YouMayKnow",setup(x){const v=S(),u=F(),g=D(),p=P(!1),h=P(null),y=M(()=>u.crushList.slice(0,5));E(async()=>{if(u.crushList.length>0){console.log("✅ Crushes ya cargados, usando caché");return}p.value=!0,h.value=null;try{await u.fetchCrushList(5,0),console.log("✅ Crushes loaded in YouMayKnow")}catch(n){console.error("❌ Error loading crushes:",n),h.value=n.message||"Error al cargar crushes"}finally{p.value=!1}});const r=n=>{console.log("🔍 Navegando al perfil de crush:",n);const o=g.locale;v.push(`/${o}/diaries/@${n}`),window.scrollTo({top:0,behavior:"smooth"})};return(n,o)=>(t(),a("div",Ke,[e("h2",Ue,l(n.$t("diaries.youMayKnow.title")),1),p.value?(t(),a("div",qe,[o[0]||(o[0]=e("div",{class:"loading-spinner"},null,-1)),e("p",He,l(n.$t("diaries.youMayKnow.loading")),1)])):h.value?(t(),a("div",Oe,[e("p",Ye,l(h.value),1)])):y.value.length===0?(t(),a("div",Je,[e("p",Ge,l(n.$t("diaries.youMayKnow.noCrushes")),1)])):(t(),a("div",Qe,[(t(!0),a(k,null,w(y.value,c=>(t(),a("div",{key:c.id,class:"user-item",onClick:_=>r(c.username)},[e("div",Ze,[e("img",{src:c.profile_picture_url||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200",alt:c.username,class:"avatar-img"},null,8,es)]),e("div",ss,[e("h3",os,"@"+l(c.username),1),o[1]||(o[1]=e("p",{class:"user-description"},[e("span",{class:"crush-dot"}),e("span",{class:"crush-text"},"Crush")],-1))]),e("button",{class:"watch-button",onClick:K(_=>r(c.username),["stop"])},l(n.$t("diaries.youMayKnow.viewProfile")),9,ts)],8,Xe))),128))]))]))}},rs=T(as,[["__scopeId","data-v-7c82d9d5"]]),is={class:"user-search"},ls={class:"search-container"},ns=["placeholder"],cs={key:0,class:"loading-state"},ds={class:"loading-text"},us={key:1,class:"empty-state"},hs={class:"empty-text"},ps={key:2,class:"empty-state"},ms={class:"empty-text"},gs={key:3,class:"users-list"},_s=["onClick"],vs={class:"user-avatar"},ys=["src","alt"],fs={class:"user-info"},bs={class:"username-container"},ks={class:"username"},ws={key:0,class:"crush-label"},$s={__name:"UserSearch",setup(x){const v=S(),u=F(),g=D(),p=P("");let h=null;V(p,r=>{if(h&&clearTimeout(h),!r.trim()){u.clearSearch();return}h=setTimeout(async()=>{try{await u.searchUsers(r.trim(),10)}catch(n){console.error("Error searching users:",n)}},300)});const y=r=>{console.log("🔍 Navegando al perfil de:",r),p.value="",u.clearSearch();const n=g.locale;v.push(`/${n}/diaries/@${r}`),window.scrollTo({top:0,behavior:"smooth"})};return(r,n)=>(t(),a("div",is,[e("div",ls,[n[1]||(n[1]=e("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM18 18l-4.35-4.35",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),U(e("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>p.value=o),type:"text",placeholder:r.$t("diaries.userSearch.placeholder"),class:"search-input"},null,8,ns),[[q,p.value]])]),$(u).isSearching?(t(),a("div",cs,[n[2]||(n[2]=e("div",{class:"loading-spinner"},null,-1)),e("p",ds,l(r.$t("diaries.userSearch.searching")),1)])):p.value.trim()?$(u).searchResults.length===0?(t(),a("div",ps,[n[4]||(n[4]=e("svg",{class:"empty-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),e("p",ms,l(r.$t("diaries.userSearch.noResults")),1)])):(t(),a("div",gs,[(t(!0),a(k,null,w($(u).searchResults,o=>(t(),a("div",{key:o.id,class:"user-item",onClick:c=>y(o.username)},[e("div",vs,[e("img",{src:o.profile_picture_url||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200",alt:o.username,class:"avatar-img"},null,8,ys)]),e("div",fs,[e("div",bs,[e("span",ks,"@"+l(o.username),1),o.is_crush?(t(),a("span",ws,[...n[5]||(n[5]=[e("span",{class:"crush-dot"},null,-1),B(" Crush ",-1)])])):b("",!0)])])],8,_s))),128))])):(t(),a("div",us,[n[3]||(n[3]=e("svg",{class:"empty-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})],-1)),e("p",hs,l(r.$t("diaries.userSearch.startTyping")),1)]))]))}},xs=T($s,[["__scopeId","data-v-783e9db0"]]),Cs={class:"diaries-view"},Ps={class:"min-h-screen bg-brand-pink-lighter pt-20 md:pt-28 lg:pt-32 pb-12 md:pb-16"},Ss={class:"container mx-auto px-4 md:px-6 lg:px-4"},Ts={key:0,class:"loading-container"},Is={class:"loading-text"},Ds={key:1,class:"error-container"},Ms={class:"error-text"},Fs={key:2,class:"diaries-grid"},Ls={class:"profile-column"},Bs={class:"other-columns"},Ns={__name:"DiariesView",props:{username:{type:String,default:null}},setup(x){const v=x,u=F(),g=N(),p=S(),{t:h}=H(),y=M(()=>{var c,_;const o=u.crushProfile||u.randomCrush;return o?{avatar:o.profile_picture_url||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",coverImage:o.cover_image_url||null,name:o.username,username:`@${o.username}`,biography:o.about||h("diaries.publicProfile.defaultBiography"),links:((c=o.links)==null?void 0:c.map(f=>({label:f.title||f.platform,color:"#C77DFF",url:f.url})))||[],state:o.current_status||"Online",notes:o.note||"",gallery:((_=o.gallery_photos)==null?void 0:_.map(f=>f.image))||[],wishlists:o.public_wishlists||[]}:null});async function r(){const o=v.username||g.params.username;if(o)try{await u.fetchPublicProfile(o),console.log(`✅ Perfil de @${o} cargado en DiariesView`)}catch(c){console.error(`❌ Error cargando perfil de @${o}:`,c)}else try{const c=await u.fetchRandomCrush();if(console.log("✅ Crush aleatorio cargado en DiariesView"),c&&c.username){const _=g.path.split("/")[1]||"en";p.replace(`/${_}/diaries/@${c.username}`),console.log(`🔗 URL actualizada a: /${_}/diaries/@${c.username}`)}}catch(c){console.error("❌ Error cargando crush aleatorio:",c)}}async function n(){try{await u.fetchRandomCrush(),console.log("✅ Crush aleatorio cargado en DiariesView")}catch(o){console.error("❌ Error cargando crush aleatorio:",o)}}return V(()=>g.params.username,(o,c)=>{o&&o!==c&&r()}),E(()=>{r()}),(o,c)=>(t(),a("div",Cs,[C(O),e("main",Ps,[e("div",Ss,[$(u).isLoading?(t(),a("div",Ts,[c[0]||(c[0]=e("div",{class:"loading-spinner"},null,-1)),e("p",Is,l(o.$t("diaries.publicProfile.loading")),1)])):$(u).error?(t(),a("div",Ds,[e("p",Ms,l($(u).error),1),e("button",{onClick:n,class:"retry-button"},l(o.$t("diaries.publicProfile.retry")),1)])):(t(),a("div",Fs,[e("div",Ls,[C(Ae,{"profile-data":y.value},null,8,["profile-data"])]),e("div",Bs,[C(xs),C(rs)])]))])]),C(Y)]))}},Ys=T(Ns,[["__scopeId","data-v-09ec9f80"]]);export{Ys as default};
