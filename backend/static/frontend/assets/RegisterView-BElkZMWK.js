import{u as q,s as P,x as j,r as g,c as u,b as d,d as e,f as k,t as n,y as R,p as m,z as v,A as f,e as C,w as V,g as B,h as S,m as E}from"../index.js";import{u as A}from"./authStore-DVIAn0uN.js";import{u as L}from"./useAlert-BgI_2DEv.js";import{L as F}from"./LanguageSelector-Cde5xz4W.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-DjCFsGER.js";const U={class:"signup-view"},D={class:"signup-container"},H={class:"signup-card"},N={class:"welcome-section"},Z={class:"welcome-title"},T={class:"input-group"},z=["placeholder"],G={class:"input-group"},J=["placeholder"],K={class:"input-group"},O={class:"password-input-container"},Q=["type","placeholder"],W={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y={class:"password-requirements"},ee={class:"requirements-title"},se={class:"requirements-list"},oe={class:"input-group"},re={class:"password-input-container"},te=["type","placeholder"],ne={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le=["disabled"],ae={key:0},ue={key:1,class:"loading-spinner"},de={class:"signin-link"},pe={class:"signin-text"},ce={__name:"RegisterView",setup(we){const _=E(),y=A(),h=q(),{t:l}=P(),{showError:a}=L(),o=j({username:"",email:"",password:"",confirmPassword:""}),p=g(!1),c=g(!1),w=g(!1),x=()=>{p.value=!p.value},$=()=>{c.value=!c.value},b=()=>!o.username||!o.email||!o.password||!o.confirmPassword?(a(l("signup.validation.fillAllFields")),!1):o.username.trim().length<3?(a(l("signup.validation.usernameRequired")),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)?o.password.length<8?(a(l("signup.validation.passwordLength")),!1):o.password!==o.confirmPassword?(a(l("signup.validation.passwordsMatch")),!1):!0:(a(l("signup.validation.validEmail")),!1),M=async()=>{var r,s;w.value=!0;try{if(!b())return;const i=await y.register({username:o.username.trim(),email:o.email.trim(),password:o.password,password_confirm:o.confirmPassword});if(i.success)_.push({path:`/${h.locale}/verification`,query:{email:o.email.trim()}});else{let t=l("signup.errors.signupFailed");(r=i.error)!=null&&r.email?t=l("signup.errors.emailExists"):(s=i.error)!=null&&s.username?t=l("signup.errors.usernameExists"):typeof i.error=="string"?t+=i.error:t+="Error desconocido",a(t)}}catch(i){console.error("Signup error:",i),a(l("signup.errors.signupFailed")+(i.message||"Error desconocido"))}finally{w.value=!1}};return(r,s)=>{const i=S("router-link");return d(),u("div",U,[s[10]||(s[10]=e("div",{class:"background-container"},[e("div",{class:"background-overlay"})],-1)),k(F,{position:"absolute",theme:"light"}),e("div",D,[e("div",H,[e("div",N,[e("h2",Z,n(r.$t("signup.title")),1)]),e("form",{onSubmit:R(M,["prevent"]),class:"signup-form"},[e("div",T,[m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.username=t),type:"text",placeholder:r.$t("signup.usernamePlaceholder"),class:"form-input",required:""},null,8,z),[[v,o.username]])]),e("div",G,[m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.email=t),type:"email",placeholder:r.$t("signup.emailPlaceholder"),class:"form-input",required:""},null,8,J),[[v,o.email]])]),e("div",K,[e("div",O,[m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.password=t),type:p.value?"text":"password",placeholder:r.$t("signup.passwordPlaceholder"),class:"form-input password-input",required:"",minlength:"8"},null,8,Q),[[f,o.password]]),e("button",{type:"button",onClick:x,class:"password-toggle"},[p.value?(d(),u("svg",X,[...s[5]||(s[5]=[e("path",{d:"M9.88 9.88C9.31 10.45 9 11.2 9 12C9 13.66 10.34 15 12 15C12.8 15 13.55 14.69 14.12 14.12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M10.73 5.08C11.15 5.03 11.57 5 12 5C19 5 23 12 23 12C22.18 13.65 20.69 15.12 18.8 16.17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M6.61 6.61C4.62 7.96 3.1 9.89 2 12C2 12 6 20 12 20C13.26 20 14.44 19.65 15.5 19.07",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("line",{x1:"2",y1:"2",x2:"22",y2:"22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(d(),u("svg",W,[...s[4]||(s[4]=[e("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),e("div",Y,[e("p",ee,n(r.$t("signup.passwordRequirements.title")),1),e("ul",se,[e("li",null,n(r.$t("signup.passwordRequirements.minLength")),1),e("li",null,n(r.$t("signup.passwordRequirements.uppercase")),1),e("li",null,n(r.$t("signup.passwordRequirements.lowercase")),1),e("li",null,n(r.$t("signup.passwordRequirements.number")),1),e("li",null,n(r.$t("signup.passwordRequirements.special")),1)])]),e("div",oe,[e("div",re,[m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.confirmPassword=t),type:c.value?"text":"password",placeholder:r.$t("signup.confirmPasswordPlaceholder"),class:"form-input password-input",required:""},null,8,te),[[f,o.confirmPassword]]),e("button",{type:"button",onClick:$,class:"password-toggle"},[c.value?(d(),u("svg",ie,[...s[7]||(s[7]=[e("path",{d:"M9.88 9.88C9.31 10.45 9 11.2 9 12C9 13.66 10.34 15 12 15C12.8 15 13.55 14.69 14.12 14.12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M10.73 5.08C11.15 5.03 11.57 5 12 5C19 5 23 12 23 12C22.18 13.65 20.69 15.12 18.8 16.17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M6.61 6.61C4.62 7.96 3.1 9.89 2 12C2 12 6 20 12 20C13.26 20 14.44 19.65 15.5 19.07",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("line",{x1:"2",y1:"2",x2:"22",y2:"22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(d(),u("svg",ne,[...s[6]||(s[6]=[e("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),e("button",{type:"submit",class:"submit-btn",disabled:w.value},[w.value?(d(),u("span",ue,[s[8]||(s[8]=e("svg",{class:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4","stroke-opacity":"0.25"}),e("path",{d:"M4 12C4 16.4183 7.58172 20 12 20V12H4Z",fill:"currentColor"})],-1)),C(" "+n(r.$t("signup.creatingAccount")),1)])):(d(),u("span",ae,n(r.$t("signup.createAccountButton")),1))],8,le)],32),e("div",de,[e("span",pe,n(r.$t("signup.alreadyHave")),1),k(i,{to:`/${B(h).locale}/login`,class:"signin-link-text"},{default:V(()=>[C(n(r.$t("signup.signIn"))+" ",1),s[9]||(s[9]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),_:1},8,["to"])])])])])}}},Ce=I(ce,[["__scopeId","data-v-96f6cc7b"]]);export{Ce as default};
