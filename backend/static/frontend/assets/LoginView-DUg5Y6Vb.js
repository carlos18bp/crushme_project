import{u as b,p as x,q as M,r as h,c as a,o as d,a as o,d as p,t as r,s as $,v as g,x as V,y as B,z as L,w as k,e as v,f as j,b as m,k as S}from"../index.js";import{u as A}from"./authStore-tY-7-Xic.js";import{L as I}from"./LanguageSelector-vuDdTwQ1.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-DjCFsGER.js";const q={class:"login-view"},D={class:"login-container"},T={class:"login-card"},F={class:"welcome-section"},H={class:"welcome-title"},N={class:"input-group"},R=["placeholder"],U={class:"input-group"},E={class:"password-input-container"},Z=["type","placeholder"],z={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J={class:"form-options"},K={class:"remember-me"},O={class:"checkbox-text"},Q=["disabled"],W={key:0},X={key:1,class:"loading-spinner"},Y={class:"signup-link"},oo={class:"signup-text"},eo={__name:"LoginView",setup(so){const f=S(),_=A(),l=b(),{t:n}=x(),t=M({email:"",password:"",rememberMe:!1}),c=h(!1),u=h(!1),C=()=>{c.value=!c.value},y=async()=>{u.value=!0;try{if(!t.email||!t.password){alert(n("login.validation.fillAllFields"));return}const s=await _.login({email:t.email,password:t.password});s.success?f.push({path:`/${l.locale}/confirmation`,query:{title:n("login.success.title"),message:n("login.success.message"),primaryActionText:n("login.success.actionButton"),primaryActionRoute:`/${l.locale}/profile`,autoRedirect:"true",redirectDelay:"3",redirectTo:`/${l.locale}/profile`}}):alert(n("login.errors.loginFailed")+s.error)}catch(s){console.error("Login error:",s),alert(n("login.errors.loginFailed")+(s.message||"Error desconocido"))}finally{u.value=!1}};return(s,e)=>{const w=j("router-link");return d(),a("div",q,[e[7]||(e[7]=o("div",{class:"background-container"},[o("div",{class:"background-overlay"})],-1)),p(I,{position:"absolute",theme:"light"}),o("div",D,[o("div",T,[o("div",F,[o("h2",H,r(s.$t("login.title")),1)]),o("form",{onSubmit:$(y,["prevent"]),class:"login-form"},[o("div",N,[g(o("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>t.email=i),type:"email",placeholder:s.$t("login.emailPlaceholder"),class:"form-input",required:""},null,8,R),[[V,t.email]])]),o("div",U,[o("div",E,[g(o("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>t.password=i),type:c.value?"text":"password",placeholder:s.$t("login.passwordPlaceholder"),class:"form-input password-input",required:""},null,8,Z),[[B,t.password]]),o("button",{type:"button",onClick:C,class:"password-toggle"},[c.value?(d(),a("svg",G,[...e[4]||(e[4]=[o("path",{d:"M9.88 9.88C9.31 10.45 9 11.2 9 12C9 13.66 10.34 15 12 15C12.8 15 13.55 14.69 14.12 14.12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("path",{d:"M10.73 5.08C11.15 5.03 11.57 5 12 5C19 5 23 12 23 12C22.18 13.65 20.69 15.12 18.8 16.17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("path",{d:"M6.61 6.61C4.62 7.96 3.1 9.89 2 12C2 12 6 20 12 20C13.26 20 14.44 19.65 15.5 19.07",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("line",{x1:"2",y1:"2",x2:"22",y2:"22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(d(),a("svg",z,[...e[3]||(e[3]=[o("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),o("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),o("div",J,[o("label",K,[g(o("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>t.rememberMe=i),type:"checkbox",class:"checkbox"},null,512),[[L,t.rememberMe]]),o("span",O,r(s.$t("login.rememberMe")),1)]),p(w,{to:`/${v(l).locale}/forgot-password`,class:"forgot-password"},{default:k(()=>[m(r(s.$t("login.forgotPassword")),1)]),_:1},8,["to"])]),o("button",{type:"submit",class:"submit-btn",disabled:u.value},[u.value?(d(),a("span",X,[e[5]||(e[5]=o("svg",{class:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4","stroke-opacity":"0.25"}),o("path",{d:"M4 12C4 16.4183 7.58172 20 12 20V12H4Z",fill:"currentColor"})],-1)),m(" "+r(s.$t("login.signingIn")),1)])):(d(),a("span",W,r(s.$t("login.signInButton")),1))],8,Q)],32),o("div",Y,[o("span",oo,r(s.$t("login.newHere")),1),p(w,{to:`/${v(l).locale}/signup`,class:"signup-link-text"},{default:k(()=>[m(r(s.$t("login.createAccount"))+" ",1),e[6]||(e[6]=o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),_:1},8,["to"])])])])])}}},ao=P(eo,[["__scopeId","data-v-edf1b8bf"]]);export{ao as default};
